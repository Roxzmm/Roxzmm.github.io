<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>GAMES104笔记 - Roxzmm</title><meta name="Description" content="Roxzmm&#39;s Personal WebSite"><meta property="og:title" content="GAMES104笔记" />
<meta property="og:description" content="引擎架构 平台层 Platform 提供操作系统/平台相关的底层功能。 文件系统 file_service 路径 path 核心层 Core 提供软件系统常用模块。 基础库 base（宏、哈希） 色彩 color 数学库 math 元数" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://Roxzmm.github.io/games104%E7%AC%94%E8%AE%B0/" /><meta property="og:image" content="https://Roxzmm.github.io/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-24T14:56:00+08:00" />
<meta property="article:modified_time" content="2023-07-10T02:52:01+08:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://Roxzmm.github.io/logo.png"/>

<meta name="twitter:title" content="GAMES104笔记"/>
<meta name="twitter:description" content="引擎架构 平台层 Platform 提供操作系统/平台相关的底层功能。 文件系统 file_service 路径 path 核心层 Core 提供软件系统常用模块。 基础库 base（宏、哈希） 色彩 color 数学库 math 元数"/>
<meta name="application-name" content="Roxzmm">
<meta name="apple-mobile-web-app-title" content="Roxzmm"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://Roxzmm.github.io/games104%E7%AC%94%E8%AE%B0/" /><link rel="prev" href="https://Roxzmm.github.io/%E4%BB%A5%E5%8A%9F%E5%88%A9%E4%B8%BB%E4%B9%89%E8%A7%82%E5%88%86%E7%B1%BB%E5%9C%A8%E4%B8%8D%E5%90%8C%E6%83%85%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%AE%E5%88%AB/" /><link rel="next" href="https://Roxzmm.github.io/mctsboardgame/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "GAMES104笔记",
        "inLanguage": "zh-cn",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/Roxzmm.github.io\/games104%E7%AC%94%E8%AE%B0\/"
        },"genre": "posts","keywords": "游戏引擎, game-engine, 游戏开发","wordcount":  8152 ,
        "url": "https:\/\/Roxzmm.github.io\/games104%E7%AC%94%E8%AE%B0\/","datePublished": "2022-10-24T14:56:00+08:00","dateModified": "2023-07-10T02:52:01+08:00","publisher": {
            "@type": "Organization",
            "name": "Roxzmm","logo": "https:\/\/Roxzmm.github.io\/logo.png"},"author": {
                "@type": "Person",
                "name": "Roxzmm"
            },"description": ""
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Roxzmm">Roxzmm</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><a class="menu-item" href="/about/"> About </a><a class="menu-item" href="https://github.com/Roxzmm" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Roxzmm">Roxzmm</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a class="menu-item" href="/about/" title="">About</a><a class="menu-item" href="https://github.com/Roxzmm" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><article class="page single"><h1 class="single-title animated flipInX">GAMES104笔记</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Roxzmm</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/%E6%B8%B8%E6%88%8F/"><i class="far fa-folder fa-fw"></i>游戏</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2022-10-24">2022-10-24</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 8152 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 17 分钟&nbsp;<span id="/games104%E7%AC%94%E8%AE%B0/" class="leancloud_visitors" data-flag-title="GAMES104笔记">
                        <i class="far fa-eye fa-fw"></i>&nbsp;<span class=leancloud-visitors-count></span>&nbsp;次阅读
                    </span>&nbsp;</div>
        </div><div class="content" id="content"><h2 id="引擎架构">引擎架构</h2>
<h3 id="平台层-platform">平台层 Platform</h3>
<p>提供操作系统/平台相关的底层功能。</p>
<h4 id="文件系统-file-service">文件系统 file_service</h4>
<h4 id="路径-path">路径 path</h4>
<h3 id="核心层-core">核心层 Core</h3>
<p>提供软件系统常用模块。</p>
<h4 id="基础库-base-宏-哈希">基础库 base（宏、哈希）</h4>
<h4 id="色彩-color">色彩 color</h4>
<h4 id="数学库-math">数学库 math</h4>
<h4 id="元数据系统-meta">元数据系统 meta</h4>
<!--list-separator-->
<ul>
<li>反射 reflection</li>
</ul>
<!--list-separator-->
<ul>
<li>序列化/反序列化 serializer</li>
</ul>
<h4 id="日志系统-log">日志系统 log</h4>
<h3 id="资源层-resource">资源层 resource</h3>
<p>提供资产加载、保存功能，资产的结构化数据定义和相关路径配置等。</p>
<h4 id="资产系统-asset-manager">资产系统 asset_manager</h4>
<h4 id="配置系统-config-manager">配置系统 config_manager</h4>
<h4 id="结构化数据定义-res-type">结构化数据定义 res_type</h4>
<!--list-separator-->
<ul>
<li>
<p>全局数据 global</p>
 <!--list-separator-->
<ul>
<li>全局粒子设置 global_particle</li>
</ul>
 <!--list-separator-->
<ul>
<li>全局渲染配置 global_rendering</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>通用数据 common</p>
 <!--list-separator-->
<ul>
<li>世界 world</li>
</ul>
 <!--list-separator-->
<ul>
<li>关卡 level</li>
</ul>
 <!--list-separator-->
<ul>
<li>对象 object</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>组件数据 components</p>
 <!--list-separator-->
<ul>
<li>动画 animation</li>
</ul>
 <!--list-separator-->
<ul>
<li>相机 camera</li>
</ul>
 <!--list-separator-->
<ul>
<li>粒子发射器 emitter</li>
</ul>
 <!--list-separator-->
<ul>
<li>网格 mesh</li>
</ul>
 <!--list-separator-->
<ul>
<li>运动 motor</li>
</ul>
 <!--list-separator-->
<ul>
<li>刚体 rigid_body</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>其他数据 data</p>
 <!--list-separator-->
<ul>
<li>动画片短 animation_clip</li>
</ul>
 <!--list-separator-->
<ul>
<li>动画骨骼节点 animation_skeleton_node_map</li>
</ul>
 <!--list-separator-->
<ul>
<li>基本形状 basic_shape</li>
</ul>
 <!--list-separator-->
<ul>
<li>动画混合状态 blend_state</li>
</ul>
 <!--list-separator-->
<ul>
<li>相机配置 camera_config</li>
</ul>
 <!--list-separator-->
<ul>
<li>材质 material</li>
</ul>
 <!--list-separator-->
<ul>
<li>网格数据 mesh_data</li>
</ul>
 <!--list-separator-->
<ul>
<li>骨骼 skeleton_data</li>
</ul>
 <!--list-separator-->
<ul>
<li>骨骼掩膜 skeleton_mask</li>
</ul>
</li>
</ul>
<h3 id="功能层-function">功能层 function</h3>
<p>提供引擎功能模块。分为框架和子系统两部分。</p>
<h4 id="框架-framework">框架 framework</h4>
<p>运行时功能和新框架。核心框架采用世界`world`-关卡`level`-GameObject`obejct`-组建`component`的层级架构。
世界管理器 world_manager 负责管理世界的加载、卸载、保存，和tick下属当前关卡。 关卡 level 负责加载、卸载、保存关卡。同时关卡也管理下属GO的tick、创建和删除。 游戏对象 object 负责加载、保存GO。同时GO也管理下属组件。
组件包括：</p>
<!--list-separator-->
<ul>
<li>动画 animation</li>
</ul>
<!--list-separator-->
<ul>
<li>相机 camera</li>
</ul>
<!--list-separator-->
<ul>
<li>网格 mesh</li>
</ul>
<!--list-separator-->
<ul>
<li>运动 motor</li>
</ul>
<!--list-separator-->
<ul>
<li>粒子 particle</li>
</ul>
<!--list-separator-->
<ul>
<li>刚体 rigidbody</li>
</ul>
<!--list-separator-->
<ul>
<li>变换 transform</li>
</ul>
<h4 id="动画-animation">动画 animation</h4>
<h4 id="角色-character">角色 character</h4>
<h4 id="控制器-controller">控制器 controller</h4>
<h4 id="全局上下文-global">全局上下文 global</h4>
<h4 id="输入-input">输入 input</h4>
<h4 id="粒子-particle">粒子 particle</h4>
<h4 id="物理-physics">物理 physics</h4>
<h4 id="渲染-render">渲染 render</h4>
<h4 id="ui-ui">UI ui</h4>
<h2 id="渲染-rendering">渲染（Rendering)</h2>
<h3 id="实践">实践</h3>
<h4 id="gpu-batch-rendering">GPU Batch Rendering</h4>
<p>合批处理，集中管理资源，使用索引获取目标资源</p>
<h4 id="可见性裁剪">可见性裁剪</h4>
<p>用包围盒判断是否在事件锥里</p>
<ul>
<li>包围球 (sphere)</li>
<li>AABB 矩形盒（对角线长等于物体长度）</li>
<li>OBB 矩形盒（高度等于物体长度）</li>
<li>8-DOP</li>
<li>CONVEX HULL（凸包）</li>
</ul>
<!--list-separator-->
<ul>
<li>用BVH的方法进行性能优化</li>
</ul>
<!--list-separator-->
<ul>
<li>PVS(Potential Visibility Set) 简单的可见区域估计（也可用于资源加载）</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>GPU Culling 让显卡来算</p>
<p>做深度测试，先绘制深度图，再绘制其他，有看不见的就跳过</p>
</li>
</ul>
<h4 id="texture-compression-纹理压缩">Texture Compression （纹理压缩）</h4>
<!--list-separator-->
<ul>
<li>
<p>Block Compression</p>
<p>ASTC算法（Mobile）
， BC7算法（PC）</p>
</li>
</ul>
<h4 id="authoring-tools-of-modeling">Authoring Tools of Modeling</h4>
<!--list-separator-->
<ul>
<li>
<p>Polymodeling</p>
<ul>
<li>BLENDER</li>
<li>MAX</li>
<li>MAYA</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Sculpting （雕刻性的工具）(z-brush)</li>
</ul>
<!--list-separator-->
<ul>
<li>Scanning（实体扫描）</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Procedural Modeling</p>
<ul>
<li>Houdini</li>
<li>Unreal</li>
</ul>
</li>
</ul>
<h4 id="cluster-based-mesh-pipeline-现代">Cluster-Based Mesh Pipeline （现代）</h4>
<!--list-separator-->
<ul>
<li>GPU-Driven Rendering Pipeline(2015)</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Geometry Rendering Pipeline Architecture(2021) （一个完整的物体被拆分成多个小集群）</p>
<ul>
<li>Nanite</li>
</ul>
</li>
</ul>
<h3 id="绘制">绘制</h3>
<h4 id="lighting">Lighting</h4>
<p>The Rendering Equation (BRDF)</p>
<!--list-separator-->
<ul>
<li>Simple light + Ambient</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Blinn-Phong Materials</p>
<p>= Ambient + Diffuse + Specular（光可叠加原理）
cons: 能量不守恒，震荡被放大，做什么都像塑料</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Shadow</p>
<p>Shadow Map
cons: 取决于采样率</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Pre-computed Global Illumination</p>
<p>空间换时间，预计算全局光照。
全局光照 = 直接光照和间接光照都有。
用Fourier Transform（傅里叶变换）来处理。
Spherical Harmonics（球谐函数）。</p>
<p>SH Lightmap: 预先计算光照贴图
（预计算时间长，但是运行时很高效，能烘焙很多很好的细节）（前景不好）</p>
<p>Light Probe:＋ Reflection Probe 放足够多的采样点，计算目标最近的采样点的光照，再用插值计算</p>
</li>
</ul>
<h4 id="material">Material</h4>
<!--list-separator-->
<ul>
<li>
<p>Physical-Based Material (PBR)</p>
<ul>
<li>Microfacet Theory （微平面理论）</li>
<li>GGX模型</li>
<li>Fresnel Equation</li>
<li>Disney Principled BRDF</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>SG模型(Specular Glossiness)</p>
<ul>
<li>Diffuse</li>
<li>Specular</li>
<li>Glossiness</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>MR模型(Metallic Roughness)</p>
<ul>
<li>Base Color</li>
<li>Roughness</li>
<li>Metallic</li>
</ul>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Image-Based Lighting (IBL)</p>
<ul>
<li>Diffuse Irradiance Map</li>
<li>Specular Approximation</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Classic Shadow Solution</p>
<ul>
<li>Cascade Shadow</li>
<li>PCF - Percentage Closer Filter
<ul>
<li>PCSS - Percentage Closer Soft Shadow（软阴影）</li>
</ul>
</li>
<li>VSSM - Variance Soft Shadow Map</li>
<li>Virtual Shadow Maps</li>
</ul>
</li>
</ul>
<h4 id="shader">Shader</h4>
<p>Uber Shader and Vaiants</p>
<h3 id="地形中大气和云的渲染">地形中大气和云的渲染</h3>
<ul>
<li>Sky and Cloud</li>
<li>Vegetation</li>
<li>Terrain</li>
</ul>
<h4 id="simple-idea-heightfield">Simple Idea - Heightfield</h4>
<!--list-separator-->
<ul>
<li>
<p>Adaptive Mesh Tessellation</p>
<ul>
<li>Triangle-Based Subdivision</li>
<li>QuadTree-Based Subdivision (more popular)
cons: T-Junctions（格子间会有空隙）</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Triangulated Irregular Network</p>
<p>需要预处理</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>GPU-Based Tessellation</p>
<ul>
<li>Mesh Shader Pipeline</li>
</ul>
<p>real-time deformable terrain</p>
</li>
</ul>
<h4 id="non-heightfield-terrain">Non-Heightfield Terrain</h4>
<h4 id="volumetric-representation--crazy-idea">Volumetric Representation (Crazy idea)</h4>
<ul>
<li>Marching Cubes</li>
</ul>
<h4 id="paint-terrain-materials">Paint Terrain Materials</h4>
<ul>
<li>Parallax and Displacement Mapping</li>
<li>Virtual Texture
<ul>
<li>DirectStorage &amp; DMA (硬盘到显存，跳过cpu、内存)</li>
</ul>
</li>
<li>Floating-point Precision Error (when map is too big) (IEEE 754 float double)
<ul>
<li>Camera-Relative Rendering</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Tree Rendering</li>
</ul>
<!--list-separator-->
<ul>
<li>Decorator Rendering</li>
</ul>
<!--list-separator-->
<ul>
<li>Road and Decals Rendering</li>
</ul>
<h4 id="atmosphere-and-cloud">Atmosphere and Cloud</h4>
<!--list-separator-->
<ul>
<li>
<p>Atmoshpere</p>
<ul>
<li>Analytic Atmosphere Appearance Modeling</li>
</ul>
<p>Participating Media （有关介质）
Radiative Transfer Equation
Volume Rendering Equation(VRE)</p>
<ul>
<li>Scattering Types
<ul>
<li>Rayleigh Scattering</li>
<li>Mie scattering</li>
</ul>
</li>
<li>Variant Air Molecules Absorption</li>
<li>Single Scattering vs Multi Scattering （单次 vs 多次散射）</li>
<li>Ray Marching
<ul>
<li>Precomputed Atmospheric Scattering</li>
</ul>
</li>
<li>Production Friendly Quick Sky and Atmosphere Rendering</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Cloud</p>
<ul>
<li>Mesh-Based Cloud Modeling</li>
<li>Billboard Cloud</li>
<li>Volumetric Cloud Modeling
<ul>
<li>Weather Texture</li>
<li>Noise Functions
<ul>
<li>Perlin Noise</li>
<li>Worley Noise</li>
</ul>
</li>
<li>Cloud Density Model</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="渲染管线-后处理及其他">渲染管线,后处理及其他</h3>
<h4 id="ambient-occlusion-环境光遮蔽">Ambient Occlusion （环境光遮蔽）</h4>
<!--list-separator-->
<ul>
<li>Screen Space Ambient Occlusion (SSAO), SSAO+</li>
</ul>
<!--list-separator-->
<ul>
<li>HBAO - Horizon-based Ambient Occlusion</li>
</ul>
<!--list-separator-->
<ul>
<li>GTAO - Ground Truth-based Ambient Occlusion</li>
</ul>
<!--list-separator-->
<ul>
<li>Ray-Tracing Ambient Occlusion</li>
</ul>
<h4 id="fog-everything">Fog Everything</h4>
<!--list-separator-->
<ul>
<li>Depth Fog</li>
</ul>
<!--list-separator-->
<ul>
<li>Height Fog</li>
</ul>
<!--list-separator-->
<ul>
<li>Voxel-based Volumetric Fog</li>
</ul>
<h4 id="anti-aliasing-抗锯齿">Anti-aliasing（抗锯齿）</h4>
<p>多采样几个，然后计算加权。问题一般出现在边缘上。</p>
<ul>
<li>Super-sample AA (SSAA) and Mutli-sample AA (MSAA)</li>
<li>FXAA(Fast Approximate Anti-aliasing)
<ul>
<li>用边缘检测来寻找需要更多采样的地方</li>
</ul>
</li>
<li>TAA(Temporal Anti-aliasing) 时序上用前一帧的数据</li>
</ul>
<h4 id="post-process">Post-process</h4>
<!--list-separator-->
<ul>
<li>
<p>Bloom Effect (光晕效果)</p>
<ul>
<li>Detect Bright Area by Threshold</li>
<li>Gaussian Blur</li>
<li>Pyramid Gaussian Blur</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Tone Mapping （色调映射）解决曝光问题</p>
<ul>
<li>Tone Mapping Curve 拟合出来的</li>
<li>ACES 奥斯卡搞的</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Color Grading</p>
<ul>
<li>Lookup Table (LUT)（色彩分级）</li>
</ul>
</li>
</ul>
<h4 id="rendering-pipeline">Rendering Pipeline</h4>
<!--list-separator-->
<ul>
<li>
<p>Forward Rendering</p>
<p>透明物最后绘制，绘制多个透明物时，由远及近地绘制</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Deferred Rendering （延迟渲染）</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Tile-based Rendering</p>
<ul>
<li>Light Culling by Tiles</li>
<li>Depth Range Optimization</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Tile-based Deferred Rendering</li>
</ul>
<!--list-separator-->
<ul>
<li>Forward+（Tile-based Forward） Rendering</li>
</ul>
<!--list-separator-->
<ul>
<li>Cluster-based Rendering (椎体)</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Visibility Buffer</p>
<ul>
<li>G-Buffer</li>
<li>V-Buffer 当几何数多于像素数时，用V-Buffer好，把几何和材质分离。</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Frame Graph</p>
<p>use DAG(Directed Acyclic Graph) to check the rightness of every module in the
project</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Render to Monitor</p>
<ul>
<li>Screen Tearing
<ul>
<li>use V-Sync to solve （垂直同步）</li>
<li>Variable Refresh Rate （可变刷新率）</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="动画--animation">动画 (Animation)</h2>
<h3 id="basics-of-animation-technology">Basics of Animation Technology</h3>
<p>Hand Draw Animation -&gt; Cel Animation -&gt; Computer Animation</p>
<h4 id="2d-animation">2D Animation</h4>
<!--list-separator-->
<ul>
<li>Sprite animation</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Live2D</p>
<p>set animation &ldquo;key frame&rdquo;</p>
</li>
</ul>
<h4 id="3d-animation">3D Animation</h4>
<p>Dof(Degrees of Freedom)（自由度）</p>
<!--list-separator-->
<ul>
<li>Rigid Hierarchical Animation</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Per-vertex Animatioin</p>
<p>离线渲染，然后作为材质载入</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Morph Target Animation</li>
</ul>
<!--list-separator-->
<ul>
<li>Skinned Animation</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Physics-based Animation</p>
<p>Ragdoll 布娃娃系统
Cloth and Fluid
Inverse Kinematics(IK)</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Animation Content Creation</p>
<ul>
<li>Digital Content Creator + Animator</li>
<li>Motion Capture （动捕）</li>
</ul>
</li>
</ul>
<h4 id="skinned-animation-implementation">Skinned Animation Implementation</h4>
<p>存骨骼关节数据，其他顶点跟着关节动
蒙皮动画(主流)</p>
<!--list-separator-->
<ul>
<li>How to Animate a Mesh</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Different Spaces</p>
<ul>
<li>local space</li>
<li>model space</li>
<li>world space</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Skeleton for Creatures</p>
<ul>
<li>Non-humanoid Skeleton</li>
<li>Humanoid Skeleton</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Joint vs. Bone （关节 和 骨骼）</p>
<p>一般指的都是关节
Joints for gameplay (eg. weapon)
mount</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Root Joint</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Bind Animation for Objects</p>
<p>bind point</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Bind Pose - T-pose vs. *A-pose</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Skeleton Pose</p>
 <!--list-separator-->
<ul>
<li>
<p>Joint Pose (9 DoFs)</p>
<ul>
<li>Orientation (3 DoFs) 旋转</li>
<li>Position (3 DoFs) 平移</li>
<li>Scale (3 DoFs) 放缩</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Math of 3D Rotation</p>
 <!--list-separator-->
<ul>
<li>2D Orientation Math</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>3D Orientation Math</p>
 <!--list-separator-->
<ul>
<li>
<p>Euler Angle</p>
<p>!Order Dependence
case: Gimbal Lock 万向结、陀螺仪、云台</p>
 <!--list-separator-->
<ul>
<li>Yaw 航向偏转</li>
</ul>
 <!--list-separator-->
<ul>
<li>Pitch 俯仰</li>
</ul>
 <!--list-separator-->
<ul>
<li>Roll 翻转</li>
</ul>
 <!--list-separator-->
<ul>
<li>Problems: 退化（当沿着Y轴旋转90度后，x、z共轴）</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Quaternion （四元数）</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Joint Pose</p>
 <!--list-separator-->
<ul>
<li>Affine Matrix</li>
</ul>
 <!--list-separator-->
<ul>
<li>Local space to Model space</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Skinning Matrix</p>
<p>（目标点根据绑定的关节变化进行变化）</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Skinning Matrix Palette</p>
<p>预计算完一个模型所有的蒙皮矩阵后存成表</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Weighted Skinning with Multi-joints</p>
<p>顶点一般最多绑定4个关节
加权蒙皮矩阵
Weighted Skinning Blend 发生在model space</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Clip</p>
 <!--list-separator-->
<ul>
<li>
<p>Quaternion Interpolation (NLERP)</p>
<p>Shortest path fixing of NLERP
cons: 角度变化速度不稳定，首尾快，中间慢</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>SLERP: Uniform Rotation Interpolation</li>
</ul>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Simple Animation Runtime Pipeline</p>
<p><a href="#updated-animation-pipeline-with-blending-and-ik" rel="">Updated Animation Pipeline with Blending and IK</a>
Clip + time -&gt; previous frame - current frame -&gt; local current pose -&gt; model current pose -&gt; skinning matrix palette -&gt; mesh vertex position</p>
</li>
</ul>
<h4 id="animation-compression">Animation Compression</h4>
<p>clip storage
animation data size
Distinction among Animation Tracks
Distinction among Joints</p>
<!--list-separator-->
<ul>
<li>
<p>Simplest Compression - DoF Reduction</p>
 <!--list-separator-->
<ul>
<li>
<p>Keyframe 计算关键帧，其余帧用插值计算</p>
<p>Catmull-Rom Spline 用于旋转插值</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Float Quantization</li>
</ul>
 <!--list-separator-->
<ul>
<li>Quaternion Quantization</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Error Propagation 错误扩散</p>
<p>Joint Sensitivity to Error
Measuring Accuracy  - Data Error</p>
<ul>
<li>Visual Error</li>
</ul>
<p>Error Compensation - In Place Correction</p>
</li>
</ul>
</li>
</ul>
<h4 id="animation-dcc">Animation DCC</h4>
<!--list-separator-->
<ul>
<li>Mesh</li>
</ul>
<!--list-separator-->
<ul>
<li>Skeleton binding</li>
</ul>
<!--list-separator-->
<ul>
<li>Skinning</li>
</ul>
<!--list-separator-->
<ul>
<li>Animation creation</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Exporting</p>
<p>跳跃时，动画和位移曲线应该分开存</p>
</li>
</ul>
<h3 id="advanced-animation-technology">Advanced Animation Technology</h3>
<h4 id="animation-blending">Animation Blending</h4>
<p>means that allows more one animation clip to contribute to the final pose of the character</p>
<!--list-separator-->
<ul>
<li>
<p>Math of Blending: LERP 做线性插值</p>
<p>在clip之间插值</p>
 <!--list-separator-->
<ul>
<li>Calculate Blend Weight</li>
</ul>
 <!--list-separator-->
<ul>
<li>Align Blend Timeline</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Blend Space</p>
 <!--list-separator-->
<ul>
<li>1D Blend Space: Directional Movement</li>
</ul>
 <!--list-separator-->
<ul>
<li>Directional Walking and Running</li>
</ul>
 <!--list-separator-->
<ul>
<li>2D Blend Space</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Skeleton Masked Blending 分上下半身和该动作结合</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Additive Blending</p>
<p>只存动画的变化量，不存绝对量，然后应用到任何clip上
可能产生Abnormal Bone Results</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Action State Machine</p>
<ul>
<li>state</li>
<li>transition: when and how</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Cross Fades</p>
 <!--list-separator-->
<ul>
<li>Smooth transition</li>
</ul>
 <!--list-separator-->
<ul>
<li>Frozen transition</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Cross Fades Curve</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Layered ASM</p>
<p>模型的不同部分分开控制</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Animation Blend Tree</p>
 <!--list-separator-->
<ul>
<li>LERP Blend Node</li>
</ul>
 <!--list-separator-->
<ul>
<li>Additive Blend Node</li>
</ul>
 <!--list-separator-->
<ul>
<li>Blend Tree Nodes</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="inverse-kinematics">Inverse Kinematics</h4>
<!--list-separator-->
<ul>
<li>
<p>Basic Concepts</p>
 <!--list-separator-->
<ul>
<li>End-effector （末端效果器）</li>
</ul>
 <!--list-separator-->
<ul>
<li>IK(Inverse Kinematics) （反向运动学）</li>
</ul>
 <!--list-separator-->
<ul>
<li>FK(Forward Kinematics)</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Two Bones IK</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Complexity of Multi-Joint IK Solving</p>
 <!--list-separator-->
<ul>
<li>Check Reachability of the Target</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Constraints of Joints</p>
 <!--list-separator-->
<ul>
<li>
<p>Heuristics Algorithm</p>
 <!--list-separator-->
<ul>
<li>
<p>CCD (Cyclic Coordinate Decent)</p>
<p>Optimized: add tolerance region
use under-damped angle</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>FABRIK (Forward and Backward Reaching Inverse Kinematics)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Multiple End-Effectors</p>
 <!--list-separator-->
<ul>
<li>IK with Multiple End-Effectors</li>
</ul>
 <!--list-separator-->
<ul>
<li>Jacobian Matrix</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Other IK Solutions</p>
 <!--list-separator-->
<ul>
<li>Physics-based Method</li>
</ul>
 <!--list-separator-->
<ul>
<li>PBD(Position Basesd Method)</li>
</ul>
 <!--list-separator-->
<ul>
<li>Fullbody IK in UE5</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>IK is still Chanllenge</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Updated Animation Pipeline with Blending and IK</p>
<p><a href="#simple-animation-runtime-pipeline" rel="">Simple Animation Runtime Pipeline</a>
Clip + time -&gt; Blend Pose -&gt; Model Pose -&gt; World Pose -&gt; IK -&gt; World Current Pose -&gt; skinning matrix palette -&gt; mesh vertex position</p>
</li>
</ul>
<h4 id="animation-pipeline">Animation Pipeline</h4>
<h4 id="animation-graph">Animation Graph</h4>
<h4 id="facial-animation">Facial Animation</h4>
<!--list-separator-->
<ul>
<li>Facial Action Coding System</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Action Units Combination</p>
 <!--list-separator-->
<ul>
<li>28 core units</li>
</ul>
 <!--list-separator-->
<ul>
<li>Key Pose Blending</li>
</ul>
 <!--list-separator-->
<ul>
<li>FACS in Morph Target Animation</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Complex Facial Skeleton</li>
</ul>
<!--list-separator-->
<ul>
<li>UV Texture Facial Animation</li>
</ul>
<!--list-separator-->
<ul>
<li>Muscle Model Animation</li>
</ul>
<!--list-separator-->
<ul>
<li>Metahuman</li>
</ul>
<h4 id="retargeting">Retargeting</h4>
<!--list-separator-->
<ul>
<li>Share Animation among Characters</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Terminology</p>
 <!--list-separator-->
<ul>
<li>Source Character</li>
</ul>
 <!--list-separator-->
<ul>
<li>Target Character</li>
</ul>
 <!--list-separator-->
<ul>
<li>Source Aniamtion</li>
</ul>
 <!--list-separator-->
<ul>
<li>Target Animation</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Ignore Offset Between Source and Target Joints</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Keep Orientation in Different Binding Pose</p>
<p>存相对变化而非绝对变化</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Process Tracks</li>
</ul>
<!--list-separator-->
<ul>
<li>Align Movement by Pelvis Height</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Lock Feet by IK after Retargeting</p>
<p>离线做比较好</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Retargeting with Different Skeleton Hierarchy</p>
<p>都归一化，再重新互相对应</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Unresolved Problems of Retargeting</p>
 <!--list-separator-->
<ul>
<li>self mesh penetration</li>
</ul>
 <!--list-separator-->
<ul>
<li>self contact constrains</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Morph Animation Retargeting</li>
</ul>
<h2 id="物理系统--physics-system">物理系统 (Physics System)</h2>
<h3 id="basic-concepts">Basic Concepts</h3>
<h4 id="physics-actors-and-shapes">Physics Actors and Shapes</h4>
<!--list-separator-->
<ul>
<li>
<p>Actors</p>
 <!--list-separator-->
<ul>
<li>static</li>
</ul>
 <!--list-separator-->
<ul>
<li>dynamic</li>
</ul>
 <!--list-separator-->
<ul>
<li>triggers</li>
</ul>
 <!--list-separator-->
<ul>
<li>kinematics</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Actor Shapes</p>
 <!--list-separator-->
<ul>
<li>Spheres</li>
</ul>
 <!--list-separator-->
<ul>
<li>Capsules</li>
</ul>
 <!--list-separator-->
<ul>
<li>Boxes</li>
</ul>
 <!--list-separator-->
<ul>
<li>Convex Meshes</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Triangle Meshes</p>
<p>only static actors</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Height Fields</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Shape Properties</p>
 <!--list-separator-->
<ul>
<li>
<p>Mass</p>
<p>Gomboc Shape</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Density</li>
</ul>
 <!--list-separator-->
<ul>
<li>Center of Mass</li>
</ul>
 <!--list-separator-->
<ul>
<li>Friction &amp; Restitution （摩擦力和弹性）</li>
</ul>
</li>
</ul>
<h4 id="forces">Forces</h4>
<!--list-separator-->
<ul>
<li>Gravity</li>
</ul>
<!--list-separator-->
<ul>
<li>Drag</li>
</ul>
<!--list-separator-->
<ul>
<li>Friction</li>
</ul>
<!--list-separator-->
<ul>
<li>Impulse &hellip;</li>
</ul>
<h4 id="movements">Movements</h4>
<!--list-separator-->
<ul>
<li>
<p>Explicit(Forward) Euler&rsquo;s Method</p>
<p>过去决定现在
取决于delta_t的精度，不收敛</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Implicit(Backward) Euler&rsquo;s Method</p>
<p>现在决定过去
衰减的</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Semi-implicit Euler&rsquo;s Method</p>
<p>显式和隐式结合一下。速度用显式的，距离用隐式的
稳定</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Particle Dynamics （质点动力学，都没考虑形状、旋转）</li>
</ul>
<h4 id="rigid-body-dynamics">Rigid Body Dynamics</h4>
<p>除了质点动力学的性质，还有:</p>
<!--list-separator-->
<ul>
<li>Orientation</li>
</ul>
<!--list-separator-->
<ul>
<li>Angular velocity</li>
</ul>
<!--list-separator-->
<ul>
<li>Angular acceleration</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Inertia tensor</p>
<p>Rotational Inertia （转动惯量）</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Angular momentum （角动量）</li>
</ul>
<!--list-separator-->
<ul>
<li>Torque （力矩）</li>
</ul>
<h4 id="collision-resolution">Collision Resolution</h4>
<!--list-separator-->
<ul>
<li>
<p>Two Phases</p>
 <!--list-separator-->
<ul>
<li>
<p>Broad phase</p>
 <!--list-separator-->
<ul>
<li>
<p>Objectives</p>
 <!--list-separator-->
<ul>
<li>find intersected rigid body AABBs</li>
</ul>
 <!--list-separator-->
<ul>
<li>Potential overlapped rigid body pairs</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Methods</p>
 <!--list-separator-->
<ul>
<li>BVH</li>
</ul>
 <!--list-separator-->
<ul>
<li>Sort and Sweep</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Narrow phase</p>
 <!--list-separator-->
<ul>
<li>
<p>Objectives</p>
 <!--list-separator-->
<ul>
<li>Detect overlapping precisely</li>
</ul>
 <!--list-separator-->
<ul>
<li>Gererate contact information</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Methods</p>
 <!--list-separator-->
<ul>
<li>Basic Shape Intersection Test</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Minkowski Difference-based Methods</p>
 <!--list-separator-->
<ul>
<li>GJK Algorithm</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Separating Axis Theorem （分离轴定理）</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Resolution</p>
 <!--list-separator-->
<ul>
<li>Applying Penalty Force</li>
</ul>
 <!--list-separator-->
<ul>
<li>Solving constrainsk 约束求解</li>
</ul>
</li>
</ul>
<h4 id="scene-query">Scene Query</h4>
<!--list-separator-->
<ul>
<li>Raycast</li>
</ul>
<!--list-separator-->
<ul>
<li>Sweep</li>
</ul>
<!--list-separator-->
<ul>
<li>Overlap</li>
</ul>
<h3 id="efficiency-accuracy-and-determinism">Efficiency, Accuracy, and Determinism</h3>
<!--list-separator-->
<ul>
<li>
<p>Collision Group</p>
<p>可碰撞的物品放一个组里存</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Simulation Optimization</p>
<ul>
<li>Island -&gt; sleep</li>
</ul>
<p>把物理世界分成一个个island，不活动的就让它sleep</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Continuous Collision Detection</p>
<p>运动速度过快时，发生类似隧穿效应的现象。在检测碰撞前，Actor已经穿过了障碍物。</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Deterministic Simulation</p>
<p>多人游戏中，同样的错误应当对全体玩家产生同样的效果。确定的输入，应当产生确定的结果。
浮点型运算会有影响
same old states + same inputs = same new states
如果能做到确定性模拟，多人游戏可以不同步服务器状态，只同步输入。</p>
</li>
</ul>
<h3 id="applications">Applications</h3>
<h4 id="character-controller">Character Controller</h4>
<p>Kinematic Actor</p>
<ul>
<li>Shape: Capsule（两层，一层保护，一层检测碰撞</li>
</ul>
<!--list-separator-->
<ul>
<li>Collide with environment</li>
</ul>
<!--list-separator-->
<ul>
<li>Auto Stepping and its Problem</li>
</ul>
<!--list-separator-->
<ul>
<li>Slope Limits and Force Sliding Down</li>
</ul>
<!--list-separator-->
<ul>
<li>Controller Volume Update</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Controller Push Objects</p>
 <!--list-separator-->
<ul>
<li>Problem case: Standing on Moving Platform</li>
</ul>
</li>
</ul>
<h4 id="ragdoll">Ragdoll</h4>
<!--list-separator-->
<ul>
<li>Map Skeleton to Rigid Bodies</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Human Joint Constraint</p>
 <!--list-separator-->
<ul>
<li>
<p>Constraints</p>
<p>Properties</p>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Animating Skeleton by Ragdoll</li>
</ul>
<!--list-separator-->
<ul>
<li>Blending between Animation and Ragdoll</li>
</ul>
<!--list-separator-->
<ul>
<li>Powered Ragdol - Physics-Animation Blending</li>
</ul>
<h4 id="cloth">Cloth</h4>
<!--list-separator-->
<ul>
<li>Animation-based Cloth Simulation</li>
</ul>
<!--list-separator-->
<ul>
<li>Rigid Body-based Cloth Simulation</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Mesh-based Cloth Simulation</p>
 <!--list-separator-->
<ul>
<li>Render Mesh vs. Physical Mesh</li>
</ul>
 <!--list-separator-->
<ul>
<li>Paint Cloth Simulation Constraints</li>
</ul>
 <!--list-separator-->
<ul>
<li>Set Cloth Physical Material</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Cloth Solver - Mass-Spring System</p>
 <!--list-separator-->
<ul>
<li>Verlet Integration （半隐式欧拉积分的变式）</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Cloth Solver - Position Based Dynamics (PBD) 约束求解</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Self Collision</p>
 <!--list-separator-->
<ul>
<li>make the cloth thicker</li>
</ul>
 <!--list-separator-->
<ul>
<li>use many substeps</li>
</ul>
 <!--list-separator-->
<ul>
<li>enforce maximal velocity</li>
</ul>
 <!--list-separator-->
<ul>
<li>introduce contact constraints and friction constraints</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="destruction">Destruction</h4>
<!--list-separator-->
<ul>
<li>Chunk Hierarchy</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Connectivity Graph</p>
 <!--list-separator-->
<ul>
<li>Connectivity Value</li>
</ul>
 <!--list-separator-->
<ul>
<li>Damage Calculation</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Destruction with / without Support Graph</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Build Chunks by Voronoi Diagram</p>
 <!--list-separator-->
<ul>
<li>Fracturing with Voronoi Diagram Mesh</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Different Fracture Patterns with Voronoi Diagram</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Destruction in Physics System</p>
<p>handle destruction after collision</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Make it realistic</p>
<p>提供一些回调函数</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Popular Destruction</p>
 <!--list-separator-->
<ul>
<li>NVIDIA APEX Destruction</li>
</ul>
 <!--list-separator-->
<ul>
<li>NVIDIA Blast</li>
</ul>
 <!--list-separator-->
<ul>
<li>Havok Destruction</li>
</ul>
 <!--list-separator-->
<ul>
<li>Chaos Destruction</li>
</ul>
</li>
</ul>
<h4 id="vehicle">Vehicle</h4>
<!--list-separator-->
<ul>
<li>
<p>Vehicle Implementation Spectrum</p>
<p>Stylized -&gt; Realistic</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Vehicle Mechanism Modeling</p>
 <!--list-separator-->
<ul>
<li>Traction Force （牵引力）</li>
</ul>
 <!--list-separator-->
<ul>
<li>Suspension Force （悬挂力）</li>
</ul>
 <!--list-separator-->
<ul>
<li>Tire Forces （轮胎力）</li>
</ul>
 <!--list-separator-->
<ul>
<li>Center of Mass</li>
</ul>
 <!--list-separator-->
<ul>
<li>Weight Transfer</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Steering angles</p>
 <!--list-separator-->
<ul>
<li>Ackermann steering</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Advanced Wheel Contact</p>
 <!--list-separator-->
<ul>
<li>Single Raycast</li>
</ul>
 <!--list-separator-->
<ul>
<li>Spherecast</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="advanced-physics-pbd-xpbd">Advanced Physics: PBD/XPBD</h4>
<!--list-separator-->
<ul>
<li>
<p>Lagrange</p>
 <!--list-separator-->
<ul>
<li>Circling Constraint</li>
</ul>
 <!--list-separator-->
<ul>
<li>String Constraint</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>PBD - Constraints Projection</p>
<p>Position Based Dynamics</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>XPBD - Extended Position Based Dynamics</p>
<p>Compliance matrix 服从度矩阵</p>
</li>
</ul>
<h3 id="homework3-animation-system-and-physics-system"><span class="org-todo done DONE">DONE</span> homework3 animation system and physics system</h3>
<h2 id="粒子和声效系统-effects">粒子和声效系统 Effects</h2>
<h3 id="particle-system">Particle System</h3>
<h4 id="particle-s-life-cycle">Particle&rsquo;s Life Cycle</h4>
<p>spawn -&gt; aging -&gt; reaction -&gt; death</p>
<h4 id="particle-emitter">Particle Emitter</h4>
<p>a particle system is a collection of individual emitters</p>
<h4 id="particle-spawn-position">Particle Spawn Position</h4>
<h4 id="particle-spawn-mode">Particle Spawn Mode</h4>
<h4 id="simulate">Simulate</h4>
<!--list-separator-->
<ul>
<li>Gravity</li>
</ul>
<!--list-separator-->
<ul>
<li>Viscous Drag</li>
</ul>
<!--list-separator-->
<ul>
<li>Wind Fields</li>
</ul>
<!--list-separator-->
<ul>
<li>Collision</li>
</ul>
<h4 id="particle-type">Particle Type</h4>
<!--list-separator-->
<ul>
<li>
<p>Billboard Particle</p>
<p>always face the camera, appear to 3d</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Mesh Particle</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Ribbon Particle</p>
<p>滞留感, Centripetal Catmull-Rom interpolation</p>
</li>
</ul>
<h4 id="particle-system-rendering">Particle System Rendering</h4>
<!--list-separator-->
<ul>
<li>Alpha Blending Order</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Particle Sort</p>
 <!--list-separator-->
<ul>
<li>
<p>Sorting mode</p>
 <!--list-separator-->
<ul>
<li>
<p>Global</p>
<p>accurate, but expensive</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Hierarchy</p>
<p>per system - per emitter - within emitter</p>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Sort rules</p>
 <!--list-separator-->
<ul>
<li>Between particles: based on particle distance with camera</li>
</ul>
 <!--list-separator-->
<ul>
<li>Between systems or emitters: bounding box</li>
</ul>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Full-Resolution Particles</p>
<p>Costy, Worst case as particles fill the screen</p>
 <!--list-separator-->
<ul>
<li>
<p>Low-Resolution Particles</p>
<p>Downsampling (scene depth) -&gt; half-res depth -&gt; particle color &amp; particle alpha -&gt; Bilateral upsampling (both scene color and scene depth) -&gt; final image</p>
</li>
</ul>
</li>
</ul>
<h4 id="gpu-particles">GPU Particles</h4>
<!--list-separator-->
<ul>
<li>
<p>Initial State</p>
<ul>
<li>Particle Pool</li>
<li>Dead List</li>
<li>Alive List</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Spawn Particles</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Simulate</p>
<p>view frustum culling</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Sort, Render and Swap Alive Lists</p>
 <!--list-separator-->
<ul>
<li>Parallel Mergesort</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Depth Buffer Collision</li>
</ul>
<h4 id="advanced-particles">Advanced Particles</h4>
<!--list-separator-->
<ul>
<li>
<p>Crowd Simulation</p>
 <!--list-separator-->
<ul>
<li>Animated Particle Mesh</li>
</ul>
 <!--list-separator-->
<ul>
<li>Particle Animation Texture</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Navigation Texture</p>
<p>Signed Distance Field, Direction Texture (RG channels)</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Runtime Behavior</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Skeleton Mesh emitter</li>
</ul>
<!--list-separator-->
<ul>
<li>Dynamic Procedural Splines</li>
</ul>
<!--list-separator-->
<ul>
<li>Interacting with environment</li>
</ul>
<!--list-separator-->
<ul>
<li>&hellip;</li>
</ul>
<h4 id="design-philosophy">Design Philosophy</h4>
<!--list-separator-->
<ul>
<li>Preset Stack-Style Modules</li>
</ul>
<!--list-separator-->
<ul>
<li>Graph-Based Design</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Hybrid Design</p>
<p>Unreal&rsquo;s Niagara System Design</p>
</li>
</ul>
<h3 id="sound-system">Sound System</h3>
<h4 id="audio">Audio</h4>
<!--list-separator-->
<ul>
<li>
<p>Volume</p>
 <!--list-separator-->
<ul>
<li>Sound Pressure （分贝）</li>
</ul>
 <!--list-separator-->
<ul>
<li>Particle Velocity</li>
</ul>
 <!--list-separator-->
<ul>
<li>Sound Intensity</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Pitch 音高</li>
</ul>
<!--list-separator-->
<ul>
<li>Timbre 音色</li>
</ul>
<!--list-separator-->
<ul>
<li>Phase and Noise Cancelling</li>
</ul>
<!--list-separator-->
<ul>
<li>Human Hearing Characteristic</li>
</ul>
<h4 id="digital-sound">Digital Sound</h4>
<!--list-separator-->
<ul>
<li>
<p>Pulse-code Modulation (PCM)</p>
 <!--list-separator-->
<ul>
<li>
<p>Sampling</p>
<p>Nyquist-Shannon Sampling Theorem</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Quantizing</p>
<p>bit-depth</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Encoding</p>
<p>audio format
游戏行业OGG格式用的多，无版权问题</p>
</li>
</ul>
</li>
</ul>
<h4 id="3d-audio-rendering">3D Audio Rendering</h4>
<!--list-separator-->
<ul>
<li>
<p>3D Sound Sources</p>
 <!--list-separator-->
<ul>
<li>
<p>Listener</p>
<p>a virtual microphone</p>
<ul>
<li>position</li>
<li>velocity</li>
<li>orientation</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Spatialization</p>
 <!--list-separator-->
<ul>
<li>Panning</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Soundfield</p>
<p>Full-sphere
used in 360 videos and VR</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Binaural Audio</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Attenuation （衰弱）制造空间感</p>
 <!--list-separator-->
<ul>
<li>
<p>Attenuation Shape</p>
 <!--list-separator-->
<ul>
<li>Sphere</li>
</ul>
 <!--list-separator-->
<ul>
<li>Capsule</li>
</ul>
 <!--list-separator-->
<ul>
<li>Box</li>
</ul>
 <!--list-separator-->
<ul>
<li>Cone</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Obstruction and Occlusion</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Reverb （混响）</p>
<ul>
<li>Direct(dry)</li>
<li>Early reflections(echo)</li>
<li>Late reverberations(tail)</li>
</ul>
 <!--list-separator-->
<ul>
<li>Reverberation Time</li>
</ul>
 <!--list-separator-->
<ul>
<li>Absorption</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Reverb in Action - Reverb Effect Control from Acoustic Parameters</p>
 <!--list-separator-->
<ul>
<li>Pre-delay</li>
</ul>
 <!--list-separator-->
<ul>
<li>HF ratio</li>
</ul>
 <!--list-separator-->
<ul>
<li>Wet level</li>
</ul>
 <!--list-separator-->
<ul>
<li>Dry level</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Sound in Motion: The Doppler Effect</li>
</ul>
</li>
</ul>
<h4 id="common-middlewares">Common Middlewares</h4>
<!--list-separator-->
<ul>
<li>fMod</li>
</ul>
<!--list-separator-->
<ul>
<li>WWise</li>
</ul>
<h2 id="引擎--tool-chains">引擎 (Tool Chains)</h2>
<h3 id="foundation-of-tool-chains">Foundation of Tool Chains</h3>
<h4 id="what-is-game-engine-tool-chains">What is Game Engine Tool Chains</h4>
<p>适应各工种特性、调和各工种矛盾，使之能一起工作</p>
<h4 id="complicated-tool-gui">Complicated Tool GUI</h4>
<ul>
<li>fast iteration</li>
<li>separation of design and implementation</li>
<li>reusability</li>
<li>&hellip;</li>
</ul>
<!--list-separator-->
<ul>
<li>Immediate Mode</li>
</ul>
<!--list-separator-->
<ul>
<li>Retained Mode*</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Design Pattern</p>
 <!--list-separator-->
<ul>
<li>MVC (model - view - controller)</li>
</ul>
 <!--list-separator-->
<ul>
<li>MVP (model - view - presenter)</li>
</ul>
 <!--list-separator-->
<ul>
<li>MVVM (model - view - viewmodel)</li>
</ul>
</li>
</ul>
<h4 id="how-to-load-asset-desesrialization">How to Load Asset - Desesrialization</h4>
<!--list-separator-->
<ul>
<li>
<p>Serialization and Deserialization</p>
 <!--list-separator-->
<ul>
<li>Text Files 先用text，方便debug，再改成json或者别的。</li>
</ul>
 <!--list-separator-->
<ul>
<li>Binary Files (eg. FBX)</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Asset Reference</p>
 <!--list-separator-->
<ul>
<li>Asset Data Repeatance</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Object Instance in Scene</p>
 <!--list-separator-->
<ul>
<li>
<p>Object Instance Variance</p>
 <!--list-separator-->
<ul>
<li>Build Variance by Copying</li>
</ul>
 <!--list-separator-->
<ul>
<li>Build Variance by Data Inheritance</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Parse Asset File</p>
 <!--list-separator-->
<ul>
<li>Build Key-Type-Value Pair Tree</li>
</ul>
 <!--list-separator-->
<ul>
<li>Binary vs. Text</li>
</ul>
 <!--list-separator-->
<ul>
<li>Endianness （字节序）</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Asset Version Compatibility</p>
 <!--list-separator-->
<ul>
<li>Version Hardcode (add version code)</li>
</ul>
 <!--list-separator-->
<ul>
<li>Field UID (Google Protocol Buffers)</li>
</ul>
</li>
</ul>
<h4 id="how-to-make-a-robust-tools">How to Make a Robust Tools</h4>
<!--list-separator-->
<ul>
<li>!!!Undo &amp; Redo</li>
</ul>
<!--list-separator-->
<ul>
<li>Crash Recovery</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Command</p>
<p>abstract operations to atomic commands which can invoke, revoke and serialize, deserialize</p>
 <!--list-separator-->
<ul>
<li>
<p>Definition</p>
 <!--list-separator-->
<ul>
<li>uid</li>
</ul>
 <!--list-separator-->
<ul>
<li>data</li>
</ul>
 <!--list-separator-->
<ul>
<li>Invoke()</li>
</ul>
 <!--list-separator-->
<ul>
<li>Revoke()</li>
</ul>
 <!--list-separator-->
<ul>
<li>Serialize() 由data提供</li>
</ul>
 <!--list-separator-->
<ul>
<li>Deserialize() 由data提供</li>
</ul>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Three Key Commands</p>
 <!--list-separator-->
<ul>
<li>Add</li>
</ul>
 <!--list-separator-->
<ul>
<li>Delete</li>
</ul>
 <!--list-separator-->
<ul>
<li>Update</li>
</ul>
</li>
</ul>
<h4 id="how-to-make-tool-chain">How to Make Tool Chain</h4>
<!--list-separator-->
<ul>
<li>Find Common Building Blocks</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Schema</p>
<p>A Description Structure</p>
 <!--list-separator-->
<ul>
<li>Basic Elements</li>
</ul>
 <!--list-separator-->
<ul>
<li>Inheritance</li>
</ul>
 <!--list-separator-->
<ul>
<li>Data Reference</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>2 Definition Ways</p>
 <!--list-separator-->
<ul>
<li>standalone schema definition file</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>defined in code</p>
<p>Reflection in Piccolo Engine</p>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Three Views for Engine Data</p>
 <!--list-separator-->
<ul>
<li>Runtime View</li>
</ul>
 <!--list-separator-->
<ul>
<li>Storage View</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Tools View</p>
 <!--list-separator-->
<ul>
<li>Various Editor Modes</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="what-you-see-is-what-you-get--wysiwyg">What You See is What You Get (WYSIWYG)</h4>
<!--list-separator-->
<ul>
<li>Stand-alone Tools</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>*In Game Tools</p>
 <!--list-separator-->
<ul>
<li>Editor Mode</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Play in Editor(PIE)</p>
 <!--list-separator-->
<ul>
<li>Play in Editor World</li>
</ul>
 <!--list-separator-->
<ul>
<li>Play in PIE World: duplicate editor world to create a PIE world and play in it</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="one-more-thing-plugin">One More Thing - Plugin</h4>
<!--list-separator-->
<ul>
<li>Extensibility</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Framework</p>
 <!--list-separator-->
<ul>
<li>PluginManager</li>
</ul>
 <!--list-separator-->
<ul>
<li>Interface</li>
</ul>
 <!--list-separator-->
<ul>
<li>API</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>toolbar, tool menu</li>
</ul>
<h3 id="applications-and-advanced-topic">Applications &amp; Advanced Topic</h3>
<h4 id="glance-of-game-production">Glance of Game Production</h4>
<h4 id="architecture-of-a-world-editor">Architecture of A World Editor</h4>
<!--list-separator-->
<ul>
<li>
<p>Editor Viewport</p>
<p>warning: editor-only code must be moved out of released game</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Everything is an Editable Object</li>
</ul>
<!--list-separator-->
<ul>
<li>Different Views of Objects</li>
</ul>
<!--list-separator-->
<ul>
<li>Schema-driven Object Property Editing</li>
</ul>
<!--list-separator-->
<ul>
<li>Content Browser</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Editing Utilities in World Editor</p>
 <!--list-separator-->
<ul>
<li>
<p>Mouse Picking</p>
 <!--list-separator-->
<ul>
<li>Ray Casting</li>
</ul>
 <!--list-separator-->
<ul>
<li>RTT</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Object Transform Editing</li>
</ul>
 <!--list-separator-->
<ul>
<li>Terrain</li>
</ul>
 <!--list-separator-->
<ul>
<li>Height Brush</li>
</ul>
 <!--list-separator-->
<ul>
<li>Instance Brush</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Environment</p>
<p>sky, light, roads, rivers &hellip;</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Rule System in Environment Editing</li>
</ul>
</li>
</ul>
<h4 id="plugin-architecture">Plugin Architecture</h4>
<!--list-separator-->
<ul>
<li>Any system and object type could be plug-ins to Editors</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Combination of Multiple Plugins</p>
 <!--list-separator-->
<ul>
<li>Covered</li>
</ul>
 <!--list-separator-->
<ul>
<li>Distributed</li>
</ul>
 <!--list-separator-->
<ul>
<li>Pipeline</li>
</ul>
 <!--list-separator-->
<ul>
<li>Onion rings</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>One More Thing - Version Control</li>
</ul>
<h4 id="design-narrative-tools">Design Narrative Tools</h4>
<!--list-separator-->
<ul>
<li>
<p>Sotrytelling in Game Engine</p>
 <!--list-separator-->
<ul>
<li>
<p>Sequencer</p>
 <!--list-separator-->
<ul>
<li>Track</li>
</ul>
 <!--list-separator-->
<ul>
<li>Propertry Track</li>
</ul>
 <!--list-separator-->
<ul>
<li>Timeline</li>
</ul>
 <!--list-separator-->
<ul>
<li>Key Frame</li>
</ul>
 <!--list-separator-->
<ul>
<li>Sequence</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="reflection-and-gameplay">Reflection and Gameplay</h4>
<!--list-separator-->
<ul>
<li>Reflection is Foundation of Sequencer</li>
</ul>
<!--list-separator-->
<ul>
<li>Visual Scripting System</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>A Common Solution - Reflection</p>
 <!--list-separator-->
<ul>
<li>Reflection Build the Bridge between Code and Tools</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>How to Implement Reflection in C++</p>
 <!--list-separator-->
<ul>
<li>AST</li>
</ul>
 <!--list-separator-->
<ul>
<li>Generate Schema from AST</li>
</ul>
 <!--list-separator-->
<ul>
<li>Precise Control of Reflection Scope</li>
</ul>
 <!--list-separator-->
<ul>
<li>Use Marco to Add Reflection Controls</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Reflection Accessors</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Code Rendering</p>
 <!--list-separator-->
<ul>
<li>use Mustache for code generation</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="collaborative-editing">Collaborative Editing</h4>
<!--list-separator-->
<ul>
<li>Bottlenecks in Large Projects</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Merging Conflicts</p>
 <!--list-separator-->
<ul>
<li>
<p>Split Assets</p>
 <!--list-separator-->
<ul>
<li>Layering the World (cons: dependence)</li>
</ul>
 <!--list-separator-->
<ul>
<li>Divide the World (cons: cross-boundary)</li>
</ul>
 <!--list-separator-->
<ul>
<li>One File Per Actor</li>
</ul>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Coordinate Editing in One Space</p>
 <!--list-separator-->
<ul>
<li>
<p>Synchronize Operations with Others</p>
<p>how to ensure the consistency of distributed operations?</p>
 <!--list-separator-->
<ul>
<li>eg. Instance lock</li>
</ul>
 <!--list-separator-->
<ul>
<li>eg. Asset lock</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>How to Solve these problems thoroughly</p>
 <!--list-separator-->
<ul>
<li>Operation Transform (OT)</li>
</ul>
 <!--list-separator-->
<ul>
<li>Conflict-free Replicated Data Type(CRDT)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="homework4-toolchain"><span class="org-todo done DONE">DONE</span> homework4 toolchain</h3>
<h2 id="玩法--gameplay">玩法 (Gameplay)</h2>
<h3 id="gameplay-complexity-and-building-blocs">Gameplay Complexity and Building Blocs</h3>
<h4 id="overview">Overview</h4>
<!--list-separator-->
<ul>
<li>
<p>Challenges</p>
 <!--list-separator-->
<ul>
<li>Cooperation among multiple systems</li>
</ul>
 <!--list-separator-->
<ul>
<li>Diversity of game play in the same game</li>
</ul>
 <!--list-separator-->
<ul>
<li>Rapid iteration</li>
</ul>
</li>
</ul>
<h4 id="event-message-mechanism">Event/Message Mechanism</h4>
<!--list-separator-->
<ul>
<li>
<p>Publish-subscribe Pattern</p>
 <!--list-separator-->
<ul>
<li>
<p>Event Definition</p>
<p>should be editable (as extension)</p>
 <!--list-separator-->
<ul>
<li>type</li>
</ul>
 <!--list-separator-->
<ul>
<li>argument</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Callback Registration</p>
 <!--list-separator-->
<ul>
<li>Object Lifespan and Callback Safety</li>
</ul>
 <!--list-separator-->
<ul>
<li>Object Strong Reference</li>
</ul>
 <!--list-separator-->
<ul>
<li>Object Weak Reference</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Event Despatching</p>
 <!--list-separator-->
<ul>
<li>Immediate</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Event Queue</p>
 <!--list-separator-->
<ul>
<li>Event Serializing and Deserializing</li>
</ul>
 <!--list-separator-->
<ul>
<li>Ring buffer</li>
</ul>
 <!--list-separator-->
<ul>
<li>Batching</li>
</ul>
 <!--list-separator-->
<ul>
<li>cons: Timeline not determined by publisher, one-frame delays</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="script-system">Script System</h4>
<!--list-separator-->
<ul>
<li>
<p>Problem of Compiled Languages</p>
 <!--list-separator-->
<ul>
<li>hard for hot-update</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Pros of Scripting languages</p>
 <!--list-separator-->
<ul>
<li>support for rapid iteration</li>
</ul>
 <!--list-separator-->
<ul>
<li>easy to learn and write</li>
</ul>
 <!--list-separator-->
<ul>
<li>support for hot update</li>
</ul>
 <!--list-separator-->
<ul>
<li>stable, less crash by running in a sandbox</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>How Script Languages Work</p>
 <!--list-separator-->
<ul>
<li>script text -&gt; bytecode -&gt; run on VM</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Object Management between Scripts and Engine</p>
 <!--list-separator-->
<ul>
<li>engine manage</li>
</ul>
 <!--list-separator-->
<ul>
<li>script manage</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Architectures for Scripting System</p>
 <!--list-separator-->
<ul>
<li>Native language dominants the game world</li>
</ul>
 <!--list-separator-->
<ul>
<li>Script language dominants the game world</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Advanced Script Features</p>
 <!--list-separator-->
<ul>
<li>Hot Update</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Popular Script Languages</p>
 <!--list-separator-->
<ul>
<li>
<p>Lua</p>
 <!--list-separator-->
<ul>
<li>Robust and mature</li>
</ul>
 <!--list-separator-->
<ul>
<li>Excellent runtime performance</li>
</ul>
 <!--list-separator-->
<ul>
<li>Light-weighted and highly extensible</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Python</p>
 <!--list-separator-->
<ul>
<li>Reflection support</li>
</ul>
 <!--list-separator-->
<ul>
<li>Built-in object-oriented support</li>
</ul>
 <!--list-separator-->
<ul>
<li>Extensive standard libraries and third-party modules</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>C#</p>
 <!--list-separator-->
<ul>
<li>Low learning curve</li>
</ul>
 <!--list-separator-->
<ul>
<li>Built-in object-oriented support</li>
</ul>
 <!--list-separator-->
<ul>
<li>Great community</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="visual-scripting">Visual Scripting</h4>
<!--list-separator-->
<ul>
<li>Variable Visualization - Data Pin and Wire</li>
</ul>
<!--list-separator-->
<ul>
<li>Statement and Expression Visualization - Node</li>
</ul>
<!--list-separator-->
<ul>
<li>Control Flow Visualization - execution Pin and Wire</li>
</ul>
<!--list-separator-->
<ul>
<li>Function Visualization - Function Graph</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Class Visualization - Blueprint</p>
 <!--list-separator-->
<ul>
<li>
<p>Make Graph User Friendly</p>
 <!--list-separator-->
<ul>
<li>Fuzzy finding</li>
</ul>
 <!--list-separator-->
<ul>
<li>Accurate suggestions by type</li>
</ul>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Visual Script Debugger</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Issues</p>
 <!--list-separator-->
<ul>
<li>
<p>Hard to merge for a team work</p>
 <!--list-separator-->
<ul>
<li>visual script is stored as a binary file</li>
</ul>
 <!--list-separator-->
<ul>
<li>manually reorder script graph is inefficient and error-prone</li>
</ul>
 <!--list-separator-->
<ul>
<li>graph can get pretty messy with complex logic</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="script-and-graph-are-twins">Script and Graph are Twins</h4>
<h4 id="character-control-and-camera">Character, Control and Camera</h4>
<!--list-separator-->
<ul>
<li>
<p>Character</p>
 <!--list-separator-->
<ul>
<li>
<p>Movement</p>
 <!--list-separator-->
<ul>
<li>Movement State Machine</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>more complex and varied states</li>
</ul>
 <!--list-separator-->
<ul>
<li>cooperate with other systems</li>
</ul>
 <!--list-separator-->
<ul>
<li>more realistic motion with Physics</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Control</p>
 <!--list-separator-->
<ul>
<li>Different input device</li>
</ul>
 <!--list-separator-->
<ul>
<li>Different game play</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>case: shoot</p>
 <!--list-separator-->
<ul>
<li>Zoom in and out</li>
</ul>
 <!--list-separator-->
<ul>
<li>Aim Assist</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Feedback</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Context Awareness</p>
 <!--list-separator-->
<ul>
<li>Context-sensitive controls</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Chord &amp; Key Sequences</li>
</ul>
 <!--list-separator-->
<ul>
<li>Subjective Feelings</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Camera</p>
 <!--list-separator-->
<ul>
<li>Basic: POV &amp; FOV</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Camera Control</p>
 <!--list-separator-->
<ul>
<li>Spring Arm</li>
</ul>
 <!--list-separator-->
<ul>
<li>Focuing FOV &amp; distance Curve</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Camera Track</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Camera Effects</p>
 <!--list-separator-->
<ul>
<li>Camera Shake</li>
</ul>
 <!--list-separator-->
<ul>
<li>Camera Filter</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Camera Manager</p>
 <!--list-separator-->
<ul>
<li>Camera Switch</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Subjective Feelings</p>
 <!--list-separator-->
<ul>
<li>loose feeling</li>
</ul>
 <!--list-separator-->
<ul>
<li>Cinematic</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="everything-is-gameplay-dot-dot-dot">Everything is Gameplay &hellip;</h4>
<h3 id="basic-artificial-intelligence">Basic Artificial Intelligence</h3>
<h4 id="navigation">Navigation</h4>
<!--list-separator-->
<ul>
<li>
<p>Navigation Steps</p>
 <!--list-separator-->
<ul>
<li>
<p>Map Representation</p>
 <!--list-separator-->
<ul>
<li>Walkable Area</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Formats</p>
 <!--list-separator-->
<ul>
<li>
<p>Waypoint Network</p>
 <!--list-separator-->
<ul>
<li>先走到路网上，再沿着路网走。（像地铁网一样，先到站点，再自动寻路）</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Grid</p>
 <!--list-separator-->
<ul>
<li>3D不太好做</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Navigation Mesh</p>
 <!--list-separator-->
<ul>
<li>must use Convex Polygon, not concave polygon</li>
</ul>
 <!--list-separator-->
<ul>
<li>Not support 3D space (直升飞机之类)</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>NavMesh Generation</p>
 <!--list-separator-->
<ul>
<li>
<p>Voxelization</p>
 <!--list-separator-->
<ul>
<li>
<p>Region Segmentation</p>
 <!--list-separator-->
<ul>
<li>Watershed Algorithm</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Advanced Features</p>
 <!--list-separator-->
<ul>
<li>Polygon Flag</li>
</ul>
 <!--list-separator-->
<ul>
<li>Tile</li>
</ul>
 <!--list-separator-->
<ul>
<li>Off-mesh Link</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Sparse Voxel Octree</p>
 <!--list-separator-->
<ul>
<li>Represents flyable 3D space</li>
</ul>
 <!--list-separator-->
<ul>
<li>Similar to spatial partitioning</li>
</ul>
 <!--list-separator-->
<ul>
<li>八叉树</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Path Finding</p>
 <!--list-separator-->
<ul>
<li>
<p>can be abstracted as shortest path problem in non-directional graph</p>
 <!--list-separator-->
<ul>
<li>DFS</li>
</ul>
 <!--list-separator-->
<ul>
<li>BFS</li>
</ul>
 <!--list-separator-->
<ul>
<li>Dijkstra Algorithm</li>
</ul>
 <!--list-separator-->
<ul>
<li>A Star</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Path Smoothing</p>
 <!--list-separator-->
<ul>
<li>String Pulling (Funnel Algorithm)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="steering">Steering</h4>
<p>From Path to Motion</p>
<!--list-separator-->
<ul>
<li>
<p>Steering Behaviors</p>
 <!--list-separator-->
<ul>
<li>
<p>Seek/Flee</p>
 <!--list-separator-->
<ul>
<li>Pusue</li>
</ul>
 <!--list-separator-->
<ul>
<li>Wander</li>
</ul>
 <!--list-separator-->
<ul>
<li>Path Following</li>
</ul>
 <!--list-separator-->
<ul>
<li>Flow Field Following</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Velocity Match</p>
 <!--list-separator-->
<ul>
<li>Arrive</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Align</li>
</ul>
</li>
</ul>
<h4 id="crowd-simulation">Crowd Simulation</h4>
<!--list-separator-->
<ul>
<li>
<p>Crowd Simulation Models</p>
 <!--list-separator-->
<ul>
<li>
<p>Microscopic models</p>
 <!--list-separator-->
<ul>
<li>Rule-based models</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Macroscopic models</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Mesoscopic models</p>
 <!--list-separator-->
<ul>
<li>RTS游戏中的小兵</li>
</ul>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Collision Avoidance</p>
 <!--list-separator-->
<ul>
<li>Force-based Models</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Velocity-based Models</p>
 <!--list-separator-->
<ul>
<li>Velocity Obstacle (VO)</li>
</ul>
 <!--list-separator-->
<ul>
<li>Reciprocal Velocity Obstacle (RVO)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="sensing--perception">Sensing (Perception)</h4>
<!--list-separator-->
<ul>
<li>
<p>Information</p>
 <!--list-separator-->
<ul>
<li>Internal Information</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>External Information</p>
 <!--list-separator-->
<ul>
<li>Static Spatial Information</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Dynamic Spatial Information</p>
 <!--list-separator-->
<ul>
<li>Influence Map</li>
</ul>
 <!--list-separator-->
<ul>
<li>Game Objects</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Sensing Simulation</li>
</ul>
<h4 id="classic-decision-making-algorithms">Classic Decision Making Algorithms</h4>
<!--list-separator-->
<ul>
<li>
<p>Finite State Machine (forward)</p>
 <!--list-separator-->
<ul>
<li>Hierarchical Finite State Machine</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Behavior Tree (forward)</p>
 <!--list-separator-->
<ul>
<li>
<p>Execution node (leaf node)</p>
 <!--list-separator-->
<ul>
<li>Condition node</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Action node</p>
 <!--list-separator-->
<ul>
<li>Success</li>
</ul>
 <!--list-separator-->
<ul>
<li>Fail</li>
</ul>
 <!--list-separator-->
<ul>
<li>Running</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Control flow node (internal node)</p>
 <!--list-separator-->
<ul>
<li>
<p>Sequencer</p>
<p>依次执行子节点</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Selector</p>
<p>只要完成某几个字节点就行</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Parallel</p>
<p>同时执行多个字节点</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Decorator</p>
<p>负责杂七杂八的事项</p>
 <!--list-separator-->
<ul>
<li>timer</li>
</ul>
 <!--list-separator-->
<ul>
<li>looper</li>
</ul>
 <!--list-separator-->
<ul>
<li>&hellip;</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Tick a BT</p>
<p>每次都会从Root node开始tick</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Blackboard</li>
</ul>
</li>
</ul>
<h3 id="advanced-ai">Advanced AI</h3>
<h4 id="hierarchical-tasks-network--backward">Hierarchical Tasks Network (backward)</h4>
<p>Make a plan like human</p>
<!--list-separator-->
<ul>
<li>
<p>HTN Framework</p>
 <!--list-separator-->
<ul>
<li>
<p>Sensors</p>
 <!--list-separator-->
<ul>
<li>Perception</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>World State</p>
 <!--list-separator-->
<ul>
<li>a subject world view in AI Brain</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Planner</p>
 <!--list-separator-->
<ul>
<li>
<p>Make a plan (Planning)</p>
 <!--list-separator-->
<ul>
<li>start from the root task and choose the method satisfying the preconditions in order</li>
</ul>
 <!--list-separator-->
<ul>
<li>decompose the method to tasks</li>
</ul>
 <!--list-separator-->
<ul>
<li>(for primitive tasks) assume all actions will be succeed, update &ldquo;world state&rdquo; in temporary memory. world state has a duplicated copy in planning phase</li>
</ul>
 <!--list-separator-->
<ul>
<li>(for primitive tasks) go back and select a new method if precondition is not satisfied</li>
</ul>
 <!--list-separator-->
<ul>
<li>repeat steps until no more task needs to be done</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Plan Runner</p>
 <!--list-separator-->
<ul>
<li>
<p>Update the world state</p>
 <!--list-separator-->
<ul>
<li>
<p>Run plan</p>
 <!--list-separator-->
<ul>
<li>execute tasks in order</li>
</ul>
 <!--list-separator-->
<ul>
<li>stop until all tasks succeed, or one task failed</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Replan</p>
 <!--list-separator-->
<ul>
<li>not have a plan</li>
</ul>
 <!--list-separator-->
<ul>
<li>the current plan is finished or failed</li>
</ul>
 <!--list-separator-->
<ul>
<li>the world state changes via its sensor</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>HTN Domain</p>
 <!--list-separator-->
<ul>
<li>
<p>Hierarchical Tasks</p>
 <!--list-separator-->
<ul>
<li>
<p>Primitive Task</p>
 <!--list-separator-->
<ul>
<li>Preconditions</li>
</ul>
 <!--list-separator-->
<ul>
<li>Action</li>
</ul>
 <!--list-separator-->
<ul>
<li>Effects</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Compound Task</p>
<p>methods have priority and precondition</p>
 <!--list-separator-->
<ul>
<li>
<p>Method</p>
<p>a chain of sub-tasks</p>
 <!--list-separator-->
<ul>
<li>can be a primitive task</li>
</ul>
 <!--list-separator-->
<ul>
<li>or a compound task</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>conclusion</p>
 <!--list-separator-->
<ul>
<li>HTN is similar with BT and more high-level</li>
</ul>
 <!--list-separator-->
<ul>
<li>faster than BT</li>
</ul>
 <!--list-separator-->
<ul>
<li>!hard to design tasks</li>
</ul>
</li>
</ul>
<h4 id="goal-oriented-action-planning--backward">Goal-Oriented Action Planning (backward)</h4>
<!--list-separator-->
<ul>
<li>
<p>Structure</p>
<p>Select Goal -&gt; Make Plan -&gt; Execute</p>
 <!--list-separator-->
<ul>
<li>Sensors</li>
</ul>
 <!--list-separator-->
<ul>
<li>World State</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Goal Set</p>
 <!--list-separator-->
<ul>
<li>Precondition</li>
</ul>
 <!--list-separator-->
<ul>
<li>Priority</li>
</ul>
 <!--list-separator-->
<ul>
<li>Goal can be presented as a Collection of States</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Action Set</p>
 <!--list-separator-->
<ul>
<li>Precondition</li>
</ul>
 <!--list-separator-->
<ul>
<li>Effect</li>
</ul>
 <!--list-separator-->
<ul>
<li>Cost</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Planning</p>
 <!--list-separator-->
<ul>
<li>check goals based on priority</li>
</ul>
 <!--list-separator-->
<ul>
<li>find the first goal which precondition is satisfied</li>
</ul>
 <!--list-separator-->
<ul>
<li>compare the target state with world state to find unsatified goal</li>
</ul>
 <!--list-separator-->
<ul>
<li>set all unsatisfied states of the goal into a stack</li>
</ul>
 <!--list-separator-->
<ul>
<li>check the top unsatisfied state from the stack</li>
</ul>
 <!--list-separator-->
<ul>
<li>select an action from action set which could satisfy the chosen state</li>
</ul>
 <!--list-separator-->
<ul>
<li>pop the state if it is satisfied by the selected action</li>
</ul>
 <!--list-separator-->
<ul>
<li>push action to plan stack</li>
</ul>
 <!--list-separator-->
<ul>
<li>check precondition of corresponded action</li>
</ul>
 <!--list-separator-->
<ul>
<li>if precondition is not satisfied, push state to stack of unsatisfied states</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Build States-Action-Cost Graph</p>
<p>can be turned into a path planning problem. The graph has direction. Use A* algorithm. Heuristics can be represented with number of unsatisfied states.</p>
 <!--list-separator-->
<ul>
<li>Node: Combination of states</li>
</ul>
 <!--list-separator-->
<ul>
<li>Edge: Action</li>
</ul>
 <!--list-separator-->
<ul>
<li>Distance: Cost</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Plan Runner</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Conclusion</p>
 <!--list-separator-->
<ul>
<li>more dynamic</li>
</ul>
 <!--list-separator-->
<ul>
<li>decouping goals and behaviors</li>
</ul>
 <!--list-separator-->
<ul>
<li>!more expensive</li>
</ul>
 <!--list-separator-->
<ul>
<li>!needs a well-represented world state and action effect</li>
</ul>
</li>
</ul>
<h4 id="monte-carlo-tree-search--backward">Monte Carlo Tree Search (backward)</h4>
<p>simulate millions possible moves and choose the best step</p>
<!--list-separator-->
<ul>
<li>
<p>Monte Carlo Method</p>
 <!--list-separator-->
<ul>
<li>
<p>node: State</p>
<p>A Tree Structured State Space</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>edge: Action</li>
</ul>
 <!--list-separator-->
<ul>
<li>Rebuild the state space for each move</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Simulation</p>
<p>Run from the state node according to the Default Policy to produce an outcome</p>
 <!--list-separator-->
<ul>
<li>
<p>Default Policy</p>
<p>A meaningful but quick rule or neural network to play the game</p>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Evaluation Factors</p>
 <!--list-separator-->
<ul>
<li>Q: Accumulation of Simulation Results</li>
</ul>
 <!--list-separator-->
<ul>
<li>N: Number of simulations</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Backpropagate</p>
<p>Propagate influence of child state back parent state</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Iteration Steps</p>
 <!--list-separator-->
<ul>
<li>
<p>Selection</p>
<p>Always search from the root node.</p>
 <!--list-separator-->
<ul>
<li>
<p>Expandable node</p>
<p>select the most urgent &ldquo;expandable&rdquo; node</p>
 <!--list-separator-->
<ul>
<li>has unvisited children</li>
</ul>
 <!--list-separator-->
<ul>
<li>nonterminal state</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Exploitatoin</p>
<p>select the child which has high Q/N value</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Exploration</p>
<p>select the child which has low number of visits</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>UCB (Upper Confidence Bounds)</p>
<p>balance exploitation and exploration.</p>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Expansion</p>
<p>one or more new child nodes are added to selected node</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Simulation</li>
</ul>
 <!--list-separator-->
<ul>
<li>Backpropagate</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>The End Condition</p>
 <!--list-separator-->
<ul>
<li>
<p>Computational budget</p>
 <!--list-separator-->
<ul>
<li>Memory size</li>
</ul>
 <!--list-separator-->
<ul>
<li>Computation time</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Choose the Best Move</p>
 <!--list-separator-->
<ul>
<li>
<p>Max child</p>
<p>the highest Q-value</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Robust child</p>
<p>the most visited</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Max-Robust child</p>
<p>both the highest visit count and the highest reward. if none exist, continue simulation</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Secure child</p>
<p>the child which maximises a lower confidence bound(LCB)</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Conclusion</p>
 <!--list-separator-->
<ul>
<li>behaves diverse</li>
</ul>
 <!--list-separator-->
<ul>
<li>agent makes the decision totally by itself</li>
</ul>
 <!--list-separator-->
<ul>
<li>can solve the problem of large search space</li>
</ul>
 <!--list-separator-->
<ul>
<li>!hard to design for most real-time games</li>
</ul>
 <!--list-separator-->
<ul>
<li>!hard to model for most real-time games</li>
</ul>
</li>
</ul>
<h4 id="machine-learning-basic">Machine Learning Basic</h4>
<!--list-separator-->
<ul>
<li>
<p>Supervised Learning</p>
<p>learn from labeled data
分类器</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Unsupervised Learning</p>
<p>learn from unlabeled data
聚类</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Semi-supervised Learning</p>
<p>learn from a lot of unlabeled data and very scarece labeled data. 小样本学习</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Reinforcement Learning</p>
<p>learn from an interaction process with environment</p>
<ul>
<li>Trial-and-error search</li>
<li>Delayed reward</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Markov Decision Process</p>
 <!--list-separator-->
<ul>
<li>
<p>Basics</p>
 <!--list-separator-->
<ul>
<li>Agent</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Environment</p>
<hr>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>State</li>
</ul>
 <!--list-separator-->
<ul>
<li>Action</li>
</ul>
 <!--list-separator-->
<ul>
<li>Reward</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Mathematical Model</p>
 <!--list-separator-->
<ul>
<li>Probability of transition</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Policy</p>
<p>a mapping from states to probabilities of selecting each possible action</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Total reward</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="build-advanced-game-ai">Build Advanced Game AI</h4>
<!--list-separator-->
<ul>
<li>
<p>Machine Learning Framework in Game</p>
 <!--list-separator-->
<ul>
<li>
<p>Observation</p>
 <!--list-separator-->
<ul>
<li>The Game State that AI can observe</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>DRL Example</p>
<p>星际</p>
 <!--list-separator-->
<ul>
<li>
<p>Model the Game</p>
 <!--list-separator-->
<ul>
<li>
<p>State</p>
<p>state = map + game statistics + units + player data</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Action</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Reward</p>
<p>direct reward: win +1; lose -1
pseudo reward
case: OpenAI Five at Dota2</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>NN design</p>
<p>case: AlphaStar NN Architecture</p>
 <!--list-separator-->
<ul>
<li>
<p>Encoder</p>
 <!--list-separator-->
<ul>
<li>
<p>DRL example</p>
 <!--list-separator-->
<ul>
<li>
<p>Multi-Layer Perceptron (MLP)</p>
<p>处理定长的东西</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>CNN</p>
<p>处理图像</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Transformer</p>
<p>处理不定长的东西</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Long-Short Term Memory (LSTM)</p>
<p>汇总处理</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Decoder</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Training Strategy</p>
 <!--list-separator-->
<ul>
<li>
<p>Supervised learning</p>
 <!--list-separator-->
<ul>
<li>KL divergence</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Reinforcement learning</p>
 <!--list-separator-->
<ul>
<li>
<p>Train the Agent - Self Play &amp; Adversarial</p>
 <!--list-separator-->
<ul>
<li>
<p>Main agents(MA)</p>
<ul>
<li>goal: most robust and output</li>
<li>self-play (35%)</li>
<li>against past LE and ME (50%)</li>
<li>against past MA (15%)</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>League Exploiters(LE)</p>
<ul>
<li>goal: find weakness of past all agents</li>
<li>against all past agents</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Main Exploiters(ME)</p>
<ul>
<li>goal: find weakness of current MA agent</li>
<li>against current MA agent</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>RL or SL</p>
<p>先用sl训练出个能用的，再用rl训练提高上限。
Dense reward, rl好，否则sl好。</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Hybrid</p>
<p>ML is powerful but also expensive.</p>
</li>
</ul>
<h2 id="online-gaming-architecture--网络游戏的架构">Online Gaming Architecture (网络游戏的架构)</h2>
<h3 id="challenges">Challenges</h3>
<h4 id="consistency">Consistency</h4>
<p>Network Synchronization</p>
<h4 id="reliability">Reliability</h4>
<p>Network Latency
Drop and Reconnect</p>
<h4 id="security">Security</h4>
<p>Cheats
Accounts Hacked</p>
<h4 id="diversities">Diversities</h4>
<p>Cross-Play
Rapid iteration
Multiple Games Systems</p>
<h4 id="complexities">Complexities</h4>
<p>High Concurrency
High Availability
High Performance</p>
<h3 id="basics">Basics</h3>
<h4 id="network-protocols">Network Protocols</h4>
<p>OSI Model</p>
<!--list-separator-->
<ul>
<li>TCP (Transmission Control Protocol)</li>
</ul>
<!--list-separator-->
<ul>
<li>UDP (User Datagram Protocol)</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Reliable UDP</p>
<p>TCP is Not Time Critical
UDP is Unreliable</p>
 <!--list-separator-->
<ul>
<li>
<p>ACK &amp; Sequence Number</p>
<p>ACK, NACK, SEQ, Timeout</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Automatic Repeaat Request (ARQ)</p>
<p>Sliding Window Protocol</p>
 <!--list-separator-->
<ul>
<li>Stop-and-wait ARQ</li>
</ul>
 <!--list-separator-->
<ul>
<li>Go-Back-N ARQ</li>
</ul>
 <!--list-separator-->
<ul>
<li>Selective Repeat ARQ</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Forward Error Correction (FEC)</p>
 <!--list-separator-->
<ul>
<li>XOR FEC 校验码</li>
</ul>
 <!--list-separator-->
<ul>
<li>Reed-Solomon Codes</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="clock-synchronization">Clock Synchronization</h4>
<!--list-separator-->
<ul>
<li>
<p>RTT</p>
 <!--list-separator-->
<ul>
<li>Round-Trip Time</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>RTT vs. Ping</p>
<p>ping: transport layer
rtt: application layer</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>RTT vs. Latency</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Network Time Protocol (NTP)</p>
 <!--list-separator-->
<ul>
<li>Reference clock</li>
</ul>
 <!--list-separator-->
<ul>
<li>NTP Algorithm</li>
</ul>
 <!--list-separator-->
<ul>
<li>Stream-Based Time Synchronization with Elimination of Higher Order Modes</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Time Server Stratums</p>
 <!--list-separator-->
<ul>
<li>Stratum Values</li>
</ul>
</li>
</ul>
<h4 id="remote-procedure-call--rpc">Remote Procedure Call(RPC)</h4>
<!--list-separator-->
<ul>
<li>Interface Definition Language</li>
</ul>
<!--list-separator-->
<ul>
<li>RPC Stubs (票据存根)</li>
</ul>
<!--list-separator-->
<ul>
<li>Stub Compiler</li>
</ul>
<h4 id="network-topology">Network Topology</h4>
<!--list-separator-->
<ul>
<li>Original Peer-to-Peer(p2p)</li>
</ul>
<!--list-separator-->
<ul>
<li>p2p with Host Server 自建房间的人</li>
</ul>
<!--list-separator-->
<ul>
<li>Dedicated Server</li>
</ul>
<h4 id="game-synchronization">Game Synchronization</h4>
<!--list-separator-->
<ul>
<li>
<p>Snapshot Sync</p>
<p>client sends inputs to server,
server simulates the game world and generates game state snapshots,
server sends them down to clients,
clients updates the display based on the snapshot</p>
 <!--list-separator-->
<ul>
<li>Snapshot Interpolation</li>
</ul>
 <!--list-separator-->
<ul>
<li>Delta Compression</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Lockstep Sync 帧同步</p>
<p>Deterministic</p>
 <!--list-separator-->
<ul>
<li>
<p>Same input + same execution = same game state</p>
<p>服务器收集所有人的收入，然后同时分发给所有人，每个人根据同样的输入自行模拟，应当得出同样的结果。
game progress depends on slowest player</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Bucket Sync</p>
<p>设置一个最长时间，超过时间就不等了，直接收集信息并分发。</p>
 <!--list-separator-->
<ul>
<li>
<p>A good trade-off between Consistency and Interactivity Maintenance</p>
 <!--list-separator-->
<ul>
<li>The Threshold</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Deterministic Difficulties</p>
 <!--list-separator-->
<ul>
<li>
<p>Floating Point Numbers</p>
<p>need to follow IEEE-754 standard;
Fixed-point math;</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Random Number</p>
<p>pseudorandom
make sure the random number seed and the generation algorithm the same</p>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Tracing and Debugging</p>
 <!--list-separator-->
<ul>
<li>checksum</li>
</ul>
 <!--list-separator-->
<ul>
<li>frame log</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Lag and Delay</p>
 <!--list-separator-->
<ul>
<li>use buffer to cache frames</li>
</ul>
 <!--list-separator-->
<ul>
<li>Separating game logic from rendering</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Reconnection Problem</p>
 <!--list-separator-->
<ul>
<li>Client Game State Snapshots</li>
</ul>
 <!--list-separator-->
<ul>
<li>Quick Catch Up</li>
</ul>
 <!--list-separator-->
<ul>
<li>Server State Snapshot Optimization</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Observing</p>
<p>存关键帧，电脑自行模拟</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Replay</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Cheating Issues</p>
 <!--list-separator-->
<ul>
<li>
<p>upload key data checksum, compare checksums among multiplayers</p>
<p>server can be considered as a player, too.</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Difficult to avoid third-party plugin which only access data.</li>
</ul>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>State Sync 状态同步</p>
<p>state data, events, control data</p>
 <!--list-separator-->
<ul>
<li>Server authorizes the game world</li>
</ul>
 <!--list-separator-->
<ul>
<li>Clients only upload relevant data</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Authorized and Replicated Clients</p>
 <!--list-separator-->
<ul>
<li>
<p>Authorized</p>
<p>player&rsquo;s local game client</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Server</p>
<p>authorized server</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Replicated</p>
<p>simulated character in other player&rsquo;s clien t</p>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Dumb Client Problem</p>
<p>clients can not do anything until receive server state update</p>
 <!--list-separator-->
<ul>
<li>Client-side prediction</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Server reconciliation</p>
 <!--list-separator-->
<ul>
<li>Ring buffer for inputs</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Packet Loss</p>
<p>server may duplicate user&rsquo;s last input</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="advanced-topics">Advanced Topics</h3>
<h4 id="character-movement-replication">Character Movement Replication</h4>
<!--list-separator-->
<ul>
<li>
<p>Interpolation &amp; Extrapolation</p>
<p>Smooth movement</p>
 <!--list-separator-->
<ul>
<li>
<p>Interpolation 内插值</p>
 <!--list-separator-->
<ul>
<li>
<p>Scenario</p>
 <!--list-separator-->
<ul>
<li>Characters&rsquo; movement</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Extrapolation 外插值</p>
<p>Estimate Current State by Extrapolation</p>
 <!--list-separator-->
<ul>
<li>
<p>Dead Reckoning 航位推算</p>
<p>estimate future state based on states that have been received</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Projective Velocity Blending</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Collision Issues</p>
 <!--list-separator-->
<ul>
<li>
<p>Physics Simulatioin Blending During Collision</p>
<p>switch system between physics system and Extrapolation</p>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Scenario</p>
 <!--list-separator-->
<ul>
<li>Player movement uses a realistic physical model</li>
</ul>
 <!--list-separator-->
<ul>
<li>Gameplay suffers from latency</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Blend Scenario of Interpolation and Extrapolation</li>
</ul>
</li>
</ul>
<h4 id="hit-registration">Hit Registration</h4>
<p>hit registration is making a consensus of all players that whether you&rsquo;ve actually hit your enemy</p>
<!--list-separator-->
<ul>
<li>
<p>Client-Side Hit Detection</p>
<p>best shooting experience, efficient,
unsafe for cheating</p>
 <!--list-separator-->
<ul>
<li>A Comparison of Hitscan Weapons vs Projectile Weapons</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>A very simple server verification of Hit Event</p>
<p>server verification is Very Tricky and Complicated</p>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Server-Side Hit Registration</p>
 <!--list-separator-->
<ul>
<li>
<p>Lag Compensation</p>
<p>用上一帧的画面来做hit detection。需要做快照
RewindTime = Current Server Time - Packet Latency - Client View Interpolation Offset</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Cover Problems</p>
 <!--list-separator-->
<ul>
<li>Running into Cover</li>
</ul>
 <!--list-separator-->
<ul>
<li>Coming out from Cover</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Hack</p>
 <!--list-separator-->
<ul>
<li>
<p>Startup Frames to Ease Latency Feeling</p>
<p>前摇动画</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Local Forecast VFX Impacts</p>
<p>本地先播放动画，再让服务器结算</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="mmog-network-architecture">MMOG Network Architecture</h4>
<p>MMOG: Massively Multiplayer Online Game.
MMORPG, MMOFPS&hellip;</p>
<!--list-separator-->
<ul>
<li>
<p>Game Sub-Systems</p>
 <!--list-separator-->
<ul>
<li>User Management</li>
</ul>
 <!--list-separator-->
<ul>
<li>Matchmaking</li>
</ul>
 <!--list-separator-->
<ul>
<li>Trading System</li>
</ul>
 <!--list-separator-->
<ul>
<li>Social System</li>
</ul>
 <!--list-separator-->
<ul>
<li>Data Storage</li>
</ul>
 <!--list-separator-->
<ul>
<li>&hellip;</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>MMO Architecture</p>
 <!--list-separator-->
<ul>
<li>
<p>Services of Link Layer</p>
 <!--list-separator-->
<ul>
<li>Login Server</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Gateway</p>
<p>隔绝内外网</p>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Lobby</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Character Server</p>
<p>All player data is managed in one system.</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Trading System</li>
</ul>
 <!--list-separator-->
<ul>
<li>Social System</li>
</ul>
 <!--list-separator-->
<ul>
<li>Matchmaking</li>
</ul>
 <!--list-separator-->
<ul>
<li>Data Storage</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Distributed Systems</p>
 <!--list-separator-->
<ul>
<li>
<p>Load Balancing</p>
 <!--list-separator-->
<ul>
<li>Consistent Hashing 一致性哈希</li>
</ul>
 <!--list-separator-->
<ul>
<li>Virtual Server Node in Consistent Hashing</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Servers Management</p>
 <!--list-separator-->
<ul>
<li>
<p>Service Discovery</p>
 <!--list-separator-->
<ul>
<li>Registry</li>
</ul>
 <!--list-separator-->
<ul>
<li>Query and Watch</li>
</ul>
 <!--list-separator-->
<ul>
<li>Health Check</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="bandwidth-optimization">Bandwidth Optimization</h4>
<!--list-separator-->
<ul>
<li>Calculate Bandwidth</li>
</ul>
<!--list-separator-->
<ul>
<li>Data Compression</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Object Relevance</p>
 <!--list-separator-->
<ul>
<li>Static Zones</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Area of Interest (AOI)</p>
 <!--list-separator-->
<ul>
<li>Direct Range-Query</li>
</ul>
 <!--list-separator-->
<ul>
<li>Spatial-Grid</li>
</ul>
 <!--list-separator-->
<ul>
<li>Orthogonal Linked-list 十字链表法</li>
</ul>
 <!--list-separator-->
<ul>
<li>Potentially Visible Set (PVS)</li>
</ul>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Varying Update Frequency by Player Position</li>
</ul>
<h4 id="anti-cheat">Anti-Cheat</h4>
<!--list-separator-->
<ul>
<li>
<p>Cheating ways</p>
 <!--list-separator-->
<ul>
<li>
<p>Game code modifications</p>
 <!--list-separator-->
<ul>
<li>
<p>Obfuscating Memory</p>
 <!--list-separator-->
<ul>
<li>Executable Packers 加壳</li>
</ul>
 <!--list-separator-->
<ul>
<li>内存混淆</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Verifying Local Files by Hashing</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>System software invoke</p>
 <!--list-separator-->
<ul>
<li>Valve Anti-Cheat and Easy Anti-Cheat</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Detecting Known Cheat Program</p>
<p>对商业化外挂比较好</p>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Net packet interception</p>
 <!--list-separator-->
<ul>
<li>
<p>Encrypt the Network Traffic</p>
<p>use asym encryption to distribute sym key.
transfer data using sym encryption</p>
 <!--list-separator-->
<ul>
<li>Symmetric-key algorithm</li>
</ul>
 <!--list-separator-->
<ul>
<li>Asymmetric encryption</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>&hellip;</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>AI Cheat</p>
 <!--list-separator-->
<ul>
<li>
<p>Rich AI Middlewares</p>
<ul>
<li>Real-Time Object Detection. YOLO v7&hellip;</li>
<li>Skeleton based Action Recognition</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Statistic-based System</li>
</ul>
</li>
</ul>
<h4 id="build-a-scalable-world">Build a Scalable World</h4>
<!--list-separator-->
<ul>
<li>
<p>Scalable Game Servers</p>
<p>Combination of zoning, instancing, and prelication</p>
 <!--list-separator-->
<ul>
<li>
<p>Zoning 分区</p>
 <!--list-separator-->
<ul>
<li>
<p>Seamless Zones</p>
 <!--list-separator-->
<ul>
<li>
<p>Zone Border</p>
<p>Border width &gt;= max AOI radius</p>
 <!--list-separator-->
<ul>
<li>Active Entity</li>
</ul>
 <!--list-separator-->
<ul>
<li>Ghost Entity</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Cross Border</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Instancing</li>
</ul>
 <!--list-separator-->
<ul>
<li>Replication</li>
</ul>
</li>
</ul>
<h2 id="advanced-topics">Advanced Topics</h2>
<h3 id="data-oriented-programming-and-job-system">Data-Oriented Programming and Job System</h3>
<h4 id="basics-of-parallel-programming">Basics of Parallel Programming</h4>
<!--list-separator-->
<ul>
<li>
<p>Types of Multitasking</p>
 <!--list-separator-->
<ul>
<li>Preemptive Multitasking 抢占式多任务</li>
</ul>
 <!--list-separator-->
<ul>
<li>Non-preemptive Multitasking</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Thread Context Switch</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Parallel Problems in Parallel Computing</p>
 <!--list-separator-->
<ul>
<li>
<p>Embarrassingly Parallel Problem (or Perfectly Parallel)</p>
<p>Little or no dependency or need for communication between parallel tasks</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Non-embarrassingly Parallel Problem</p>
<p>Communication is needed between parallel tasks</p>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Data Race in Parallel Programming</p>
 <!--list-separator-->
<ul>
<li>
<p>Blocking Algorithm</p>
<p>lock may cause dead lock</p>
 <!--list-separator-->
<ul>
<li>
<p>Locking Primitives</p>
<p>make a critical section for shared resource access</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Atomic Operation</p>
 <!--list-separator-->
<ul>
<li>Lock-free Programming</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Lock Free vs Wait Free</p>
<p>lock free will waste cpu usage</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Problem of Memory Reordering</p>
 <!--list-separator-->
<ul>
<li>
<p>Compiler Reordering Optimizations</p>
<p>compilers and CPUs often modify the execution order of instructions to optimize performance.
execution order of instructions is very critical.</p>
</li>
</ul>
</li>
</ul>
<h4 id="parallel-framework-of-game-engine">Parallel Framework of Game Engine</h4>
<!--list-separator-->
<ul>
<li>
<p>Fixed Multi-thread</p>
<ul>
<li>Render Thread</li>
<li>Simulation Thread</li>
<li>Logic Thread</li>
<li>Network Thread</li>
</ul>
<p>cons: not balanced workload; unscalable</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Thread Fork-Join</p>
<p>use a thread pool to prevent frequent thread creation/destruction
cons: still not very balanced</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Task Graph</p>
<p>a directed acyclic graph</p>
<ul>
<li>node: Task</li>
<li>edge: Dependency</li>
</ul>
<p>building task graph by links
too static, not dynamic</p>
</li>
</ul>
<h4 id="job-system">Job System</h4>
<!--list-separator-->
<ul>
<li>
<p>Coroutine</p>
 <!--list-separator-->
<ul>
<li>
<p>Coroutine vs. Thread</p>
 <!--list-separator-->
<ul>
<li>
<p>Coroutine</p>
<ul>
<li>scheduled by programmers</li>
<li>to be executed within a thread</li>
<li>context switch is faster without kernel switch</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Thread</p>
<ul>
<li>scheduled by os</li>
<li>resides in a process</li>
<li>context switch is costly with kernel switch</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Stackful Coroutine</li>
</ul>
 <!--list-separator-->
<ul>
<li>Stackless Coroutine</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Fiber-based Job Systesm</p>
<p>fiber is like coroutine except that fiber is scheduled by a scheduler</p>
 <!--list-separator-->
<ul>
<li>One work thread for one core</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Job Scheduler</p>
 <!--list-separator-->
<ul>
<li>
<p>Global Job</p>
<p>outside threads add globaljobs to global job queue;
work thread gets global job from global queue;</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>LIFO and FIFO Mode</p>
<p>一般会用LIFO Mode，类似dependency关系</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Job Dependency</p>
<p>if job yields, add it to waiting job and add necessory jobs to work thread. after finishing necessory jobs, move the job which yields back to work thread</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Job Stealing</p>
<p>if some work threads have no job, they will steal jobs from busy threads</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="data-oriented-programming--dop">Data-Oriented Programming(DOP)</h4>
<!--list-separator-->
<ul>
<li>
<p>Principle of Locality</p>
 <!--list-separator-->
<ul>
<li>Spatial Locality</li>
</ul>
 <!--list-separator-->
<ul>
<li>Single Instruction Multiple Data (SIMD)</li>
</ul>
 <!--list-separator-->
<ul>
<li>LRU(Least Recently Used)</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Cache Line</p>
 <!--list-separator-->
<ul>
<li>
<p>Cache Miss</p>
 <!--list-separator-->
<ul>
<li>Row-major order</li>
</ul>
 <!--list-separator-->
<ul>
<li>Column-major order</li>
</ul>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>Keep Code and Data Tight in Memory</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Performance-Sensitive Programming</p>
 <!--list-separator-->
<ul>
<li>
<p>Reducing Order Dependency</p>
 <!--list-separator-->
<ul>
<li>False Sharing in Cache Line</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Rranch Prediction</li>
</ul>
 <!--list-separator-->
<ul>
<li>Existential Processing</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Performance-Sensitive Data Arrangement</p>
 <!--list-separator-->
<ul>
<li>
<p>Array of Structure vs. Structure of Array</p>
<p>if we want to read the position of all particles, SOA has better performance</p>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Entity Component System (ECS)</p>
 <!--list-separator-->
<ul>
<li>
<p>Entity</p>
<p>an ID refer to a set of components</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Componet</p>
<p>the data to be processed by systems, no logic at all</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>System</p>
<p>where the logic happens, read/write component data</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Unity Data-Oriented Tech Stack (DOTS)</p>
 <!--list-separator-->
<ul>
<li>
<p>ECS</p>
 <!--list-separator-->
<ul>
<li>
<p>Archetype</p>
<p>Type of Game Objects
Entities are grouped into archetypes</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Data Layout in Archetype</p>
<p>same components in an archetype are packed tightly into chunks for cache friendliness</p>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>C# Job System</li>
</ul>
 <!--list-separator-->
<ul>
<li>Burst Compiler</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Unreal Mass Framework</p>
 <!--list-separator-->
<ul>
<li>Entity</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Component</p>
<p>Fragments and tags</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Systems</p>
<p>Processors</p>
<ul>
<li>ConfigureQuery</li>
<li>Execute</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/ox-hugo/_20221102_103042cpu_operations_cost.png"
        data-srcset="/ox-hugo/_20221102_103042cpu_operations_cost.png, /ox-hugo/_20221102_103042cpu_operations_cost.png 1.5x, /ox-hugo/_20221102_103042cpu_operations_cost.png 2x"
        data-sizes="auto"
        alt="/ox-hugo/_20221102_103042cpu_operations_cost.png"
        title="/ox-hugo/_20221102_103042cpu_operations_cost.png" /></p>
<p>:ATTACH:</p>
</li>
</ul>
</li>
</ul>
<h3 id="dynamic-global-illumination-and-lumen">Dynamic Global Illumination and Lumen</h3>
<h4 id="global-illumination">Global Illumination</h4>
<!--list-separator-->
<ul>
<li>
<p>Monte Carlo Integration</p>
 <!--list-separator-->
<ul>
<li>
<p>Sampling is the Key</p>
 <!--list-separator-->
<ul>
<li>
<p>Uniform Sampling 均一采样</p>
<p>Probability Distribution Function (PDF)
Importance Sampling</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Reflective Shadow Maps (RSM)</p>
 <!--list-separator-->
<ul>
<li>Cone Tracing with RSM</li>
</ul>
 <!--list-separator-->
<ul>
<li>Acceleration with Low-Res Indirect Illumination</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Light Propagation Volumes (LPV)</p>
 <!--list-separator-->
<ul>
<li>Radiance Propagation</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Sparse Voxel Octree for Real-time GLobal Illumination (SVOGI)</p>
 <!--list-separator-->
<ul>
<li>Collect Surface Voxel</li>
</ul>
 <!--list-separator-->
<ul>
<li>Shading with Cone Tracing in Voxel Tree</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Voxelization Based Global Illumination (VXGI)</p>
<p>Store the voxel data in clipmaps
采用LOD的方法，离自己50米内用高精度存个图，离自己50到100米内用中精度存，100米外用低精度存，最后三个图打包起来用</p>
 <!--list-separator-->
<ul>
<li>Voxel Update and Toroidal Addressing</li>
</ul>
 <!--list-separator-->
<ul>
<li>Voxelization for Opacity</li>
</ul>
 <!--list-separator-->
<ul>
<li>Accumulate Voxel Radiance and Opacity along the Path</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Problems</p>
 <!--list-separator-->
<ul>
<li>Incorrect Occlusion (opacity)</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Light Leaking</p>
<p>when occlusion wall is much smaller than voxel size</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Screen Space Global Illumination (SSGI)</p>
 <!--list-separator-->
<ul>
<li>Radiance Sampling in Screen Space</li>
</ul>
 <!--list-separator-->
<ul>
<li>Linear Raymarching</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Hierarchical Tracing</p>
<p>用hierarchical z的方法，如果光线不被上层阻挡，就直接射向下一层，直至被某层阻挡后，回到上一层去一个个判断</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Ray Reuse among Neighbor Pixels</li>
</ul>
 <!--list-separator-->
<ul>
<li>Cone Tracing with Mipmap Filtering</li>
</ul>
</li>
</ul>
<h4 id="lumen">Lumen</h4>
<ul>
<li>Ray trace is slow</li>
<li>Sampling is hard</li>
<li>Low-res filtered scene space probes lit full pixels</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Fast Ray Trace in Any Hardware</p>
 <!--list-separator-->
<ul>
<li>
<p>Signed Distance Field (SDF)</p>
 <!--list-separator-->
<ul>
<li>Per-Mesh SDF</li>
</ul>
 <!--list-separator-->
<ul>
<li>SDF for Thin Meshes</li>
</ul>
 <!--list-separator-->
<ul>
<li>Ray Tracing with SDF</li>
</ul>
 <!--list-separator-->
<ul>
<li>Cone Tracing with SDF</li>
</ul>
 <!--list-separator-->
<ul>
<li>Sparse Mesh SDF</li>
</ul>
 <!--list-separator-->
<ul>
<li>Mesh SDF LoD</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Ray Tracing with Global SDF</p>
 <!--list-separator-->
<ul>
<li>
<p>Global SDF</p>
<p>inaccurate near the start of the zone, but fast</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Cache Global SDF around Camera</li>
</ul>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Radiance Injection and Caching</p>
 <!--list-separator-->
<ul>
<li>
<p>Mesh card - orthogonal camera on 6-Axis Aligned directions</p>
<p>以相机的视界为基准</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Generate Surface Cache</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Lighing Cache Pipeline</p>
<p>用时序上上一帧的直接光照计算当前帧的间接光照</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Voxel Clipmap for RAdiance Caching of the Whole Scene</li>
</ul>
 <!--list-separator-->
<ul>
<li>Build Voxel Faces by Short Ray Cast</li>
</ul>
 <!--list-separator-->
<ul>
<li>Inject Light into clipmap</li>
</ul>
 <!--list-separator-->
<ul>
<li>Indirect Lighting</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Combine Lighting</p>
<p>finalLighting = (directLighting + indirectLighting) * Diffuse_Lambert(Albedo) +Emissive;</p>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Build a lot of Probes with DIfferent Kinds</p>
 <!--list-separator-->
<ul>
<li>
<p>Screen Space Probe</p>
<ul>
<li>Octahedron mapping</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Screen Probe Placement</p>
<p>16*16采样无效的话，就细化Tile8*8，4*4</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Screen Probe Atlas</li>
</ul>
 <!--list-separator-->
<ul>
<li>Screen Probe Jitter</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Importance Sampling</p>
 <!--list-separator-->
<ul>
<li>Accumulate Normal Distribution Nearby</li>
</ul>
 <!--list-separator-->
<ul>
<li>Structured Importance Sampling</li>
</ul>
 <!--list-separator-->
<ul>
<li>Fix Budget Importance Sampling based on Lighting and BRDF</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Denoising and Spatial Probe Filtering</p>
 <!--list-separator-->
<ul>
<li>
<p>Denoise</p>
 <!--list-separator-->
<ul>
<li>Gather Radiance from neighbors</li>
</ul>
 <!--list-separator-->
<ul>
<li>Clamp Distance Mismatching</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>World Space Probes and Ray Connecting</p>
 <!--list-separator-->
<ul>
<li>World Space Radiance Cache</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Connecting rays</p>
<p>connect screen probe ray and world probe ray</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Placement and caching</li>
</ul>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Shading Full Pixels with Screen Space Probes</p>
 <!--list-separator-->
<ul>
<li>Convert Probe Radiance to 3rd order Spherical Harmonic</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Overall, Performance and Result <span class="tag"><span class="ATTACH">ATTACH</span></span></p>
<figure><img src="/ox-hugo/_20221102_155403lumen_tracing_steps.png"/>
    </figure>

</li>
</ul>
<h3 id="nanite">Nanite</h3>
<h4 id="gpu-driven-pipeline-in-assassins-creed">GPU Driven Pipeline in Assassins Creed</h4>
<!--list-separator-->
<ul>
<li>Mesh Cluster Rendering</li>
</ul>
<h4 id="gpu-instance-culling">GPU Instance Culling</h4>
<h4 id="gpu-cluster-culling">GPU Cluster Culling</h4>
<!--list-separator-->
<ul>
<li>Index Buffer Compaction</li>
</ul>
<!--list-separator-->
<ul>
<li>Codec Triangle Visibility in Cube: Backface Culling</li>
</ul>
<h4 id="occlusion-culling-for-camera-and-shadow">Occlusion Culling for Camera and Shadow</h4>
<h4 id="occlusion-depth-generation">Occlusion Depth Generation</h4>
<h4 id="two-phase-occlusion-culling">Two-Phase Occlusion Culling</h4>
<!--list-separator-->
<ul>
<li>
<p>1st phase</p>
<p>cull objects&amp; clusters using last frame&rsquo;s depth pyramid.
render visible objects</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>2nd phase</p>
<p>refresh depth pyramid. Test culled objects&amp; clusters. Render false negatives</p>
</li>
</ul>
<h4 id="fast-occlusion-for-shadow">Fast Occlusion for Shadow</h4>
<h4 id="camera-depth-reprojection-for-shadow-culling">Camera Depth Reprojection for Shadow Culling</h4>
<h4 id="visiblity-buffer">Visiblity Buffer</h4>
<p>a cache-friendly approach to deferred shading</p>
<!--list-separator-->
<ul>
<li>
<p>Filling</p>
<p>for each pixel in screen:</p>
<ul>
<li>pack (alpha masked bit, drawID, primitiveID) into one 32-bit UINT</li>
<li>write that into a screen-sized buffer</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Shading</p>
<p>for each pixel in screen:</p>
<ul>
<li>get drawID/triangleID at pixel pos</li>
<li>load data for the 3 vertices from the VB</li>
<li>compute triangle gradients</li>
<li>interpolate vertex attributes at pixel pos using gradients</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Visibility Buffer + Deferred Shading</p>
 <!--list-separator-->
<ul>
<li>Correct Texture Mipmap with Gradient</li>
</ul>
</li>
</ul>
<h4 id="virtual-geometry-nanite">Virtual Geometry - Nanite</h4>
<p>适合静态事物，不适合动态人物、物品</p>
<!--list-separator-->
<ul>
<li>
<p>Overview</p>
 <!--list-separator-->
<ul>
<li>Virtual Texture</li>
</ul>
 <!--list-separator-->
<ul>
<li>Voxels? no</li>
</ul>
 <!--list-separator-->
<ul>
<li>Subdivision Surface? no</li>
</ul>
 <!--list-separator-->
<ul>
<li>Maps-based Method? no</li>
</ul>
 <!--list-separator-->
<ul>
<li>Point Cloud? no</li>
</ul>
 <!--list-separator-->
<ul>
<li>Foundation of Computer Graphics - Triangles! yes</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Geometry Represent</p>
 <!--list-separator-->
<ul>
<li>
<p>Cluster-based LoD</p>
 <!--list-separator-->
<ul>
<li>
<p>View Dependent LoD Transitions</p>
<p>近处三角形多，远处三角形少</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Naive Solution</p>
 <!--list-separator-->
<ul>
<li>CLuster LoD Hierarchy</li>
</ul>
 <!--list-separator-->
<ul>
<li>Simple Streaming Idea</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>LoD Cracks</p>
<p>the cross region of different LoD</p>
 <!--list-separator-->
<ul>
<li>Locked Boundaries (bad)</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Nanite Solution - CLuster Group</p>
<p>聚合之前的三角形成group，在group里重新划分出较大的三角形。三角形的边界和之前的边界可能会不同</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>DAG for Cluster Groups (not tree)</li>
</ul>
 <!--list-separator-->
<ul>
<li>detail of simplification - QEM</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Runtime LoD Selection</p>
 <!--list-separator-->
<ul>
<li>
<p>LoD Selection in Parallel</p>
 <!--list-separator-->
<ul>
<li>
<p>Core Equation of Parallel LoD Selection for Cluster Groups</p>
<p>when can we LoD cull a cluster?</p>
<ul>
<li>Render: ParentError &gt; threshold &amp;&amp; ClusterError &lt;= threshold</li>
<li>Cull: ParentError &lt;= threhold || ClusterError &gt; threshold</li>
</ul>
<p>if parent is already precise enough, no need to check child.</p>
<ul>
<li>ParentError &lt;= threshold</li>
<li>tree based on ParentError, not ClusterError</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Isolated LoD Selection for Each Cluster Group</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>BVH and runtime LoD</p>
 <!--list-separator-->
<ul>
<li>
<p>Build BVH for Acceleratio of LoD Selection</p>
<p>balance BVH for 4 nodes, every node is a LoD cluster group</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Rendering</p>
 <!--list-separator-->
<ul>
<li>
<p>Software and Hardware Rasterization</p>
 <!--list-separator-->
<ul>
<li>Scanline Software Rasterizer</li>
</ul>
 <!--list-separator-->
<ul>
<li>Depth Test</li>
</ul>
 <!--list-separator-->
<ul>
<li>Visibility Buffer</li>
</ul>
 <!--list-separator-->
<ul>
<li>Imposters for Tiny Instances</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Deferred Materials</p>
 <!--list-separator-->
<ul>
<li>
<p>Shading Efficiency</p>
<p>hardware depth test;
convert material id to depth value</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Material Sorting with Tile-Bsed Rendering</p>
 <!--list-separator-->
<ul>
<li>Material Classify</li>
</ul>
</li>
</ul>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>Tile-based Acceleration</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Virtual Shadow Map</p>
<p>A Cached Shadow System</p>
 <!--list-separator-->
<ul>
<li>Sample Distribution Shadow Maps</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Virtual Shadow Mapping</p>
<p>16k * 16k virtual shadow map for each light;
相机和光源不动就不用更新，动了才更新</p>
 <!--list-separator-->
<ul>
<li>Shadow Page Allocation</li>
</ul>
 <!--list-separator-->
<ul>
<li>Shadow Page Cache Invalidation</li>
</ul>
</li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Streaming and Compression</p>
 <!--list-separator-->
<ul>
<li>
<p>Memory representation</p>
<p>vertex quantization and encoding</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Disk representation</p>
<ul>
<li>hardware LZ decompression</li>
<li>for better compression</li>
<li>transcode on the GPU</li>
</ul>
</li>
</ul>
</li>
</ul>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2023-07-10</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/games104%E7%AC%94%E8%AE%B0/index.md" target="_blank">阅读原始文档</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://Roxzmm.github.io/games104%E7%AC%94%E8%AE%B0/" data-title="GAMES104笔记" data-hashtags="游戏引擎,game-engine,游戏开发"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://Roxzmm.github.io/games104%E7%AC%94%E8%AE%B0/" data-hashtag="游戏引擎"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="分享到 WhatsApp" data-sharer="whatsapp" data-url="https://Roxzmm.github.io/games104%E7%AC%94%E8%AE%B0/" data-title="GAMES104笔记" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Line" data-sharer="line" data-url="https://Roxzmm.github.io/games104%E7%AC%94%E8%AE%B0/" data-title="GAMES104笔记"><i data-svg-src="/lib/simple-icons/icons/line.min.svg"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://Roxzmm.github.io/games104%E7%AC%94%E8%AE%B0/" data-title="GAMES104笔记"><i class="fab fa-weibo fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Myspace" data-sharer="myspace" data-url="https://Roxzmm.github.io/games104%E7%AC%94%E8%AE%B0/" data-title="GAMES104笔记" data-description=""><i data-svg-src="/lib/simple-icons/icons/myspace.min.svg"></i></a><a href="javascript:void(0);" title="分享到 Blogger" data-sharer="blogger" data-url="https://Roxzmm.github.io/games104%E7%AC%94%E8%AE%B0/" data-title="GAMES104笔记" data-description=""><i class="fab fa-blogger fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Evernote" data-sharer="evernote" data-url="https://Roxzmm.github.io/games104%E7%AC%94%E8%AE%B0/" data-title="GAMES104笔记"><i class="fab fa-evernote fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/%E6%B8%B8%E6%88%8F%E5%BC%95%E6%93%8E/">游戏引擎</a>,&nbsp;<a href="/tags/game-engine/">game-engine</a>,&nbsp;<a href="/tags/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/">游戏开发</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/%E4%BB%A5%E5%8A%9F%E5%88%A9%E4%B8%BB%E4%B9%89%E8%A7%82%E5%88%86%E7%B1%BB%E5%9C%A8%E4%B8%8D%E5%90%8C%E6%83%85%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%AE%E5%88%AB/" class="prev" rel="prev" title="以功利主义观分类在不同情境下的差别"><i class="fas fa-angle-left fa-fw"></i>以功利主义观分类在不同情境下的差别</a>
            <a href="/mctsboardgame/" class="next" rel="next" title="MctsBoardGame">MctsBoardGame<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="valine" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://valine.js.org/">Valine</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.115.2">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2022 - 2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Roxzmm</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/valine/valine.min.css"><link rel="stylesheet" href="/lib/lightgallery/lightgallery.min.css"><script type="text/javascript" src="/lib/valine/Valine.min.js"></script><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.stemmer.support.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.zh.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lightgallery.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lg-thumbnail.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lg-zoom.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{"valine":{"appId":"Q9MuQmK7yivKBPmIe42gBiL1-MdYXbMMI","appKey":"ccI0BGotszwwlpgunY7B8WdL","avatar":"mp","el":"#valine","emojiCDN":"https://cdn.jsdelivr.net/npm/emoji-datasource-google@5.0.1/img/google/64/","emojiMaps":{"100":"1f4af.png","alien":"1f47d.png","anger":"1f4a2.png","angry":"1f620.png","anguished":"1f627.png","astonished":"1f632.png","black_heart":"1f5a4.png","blue_heart":"1f499.png","blush":"1f60a.png","bomb":"1f4a3.png","boom":"1f4a5.png","broken_heart":"1f494.png","brown_heart":"1f90e.png","clown_face":"1f921.png","cold_face":"1f976.png","cold_sweat":"1f630.png","confounded":"1f616.png","confused":"1f615.png","cry":"1f622.png","crying_cat_face":"1f63f.png","cupid":"1f498.png","dash":"1f4a8.png","disappointed":"1f61e.png","disappointed_relieved":"1f625.png","dizzy":"1f4ab.png","dizzy_face":"1f635.png","drooling_face":"1f924.png","exploding_head":"1f92f.png","expressionless":"1f611.png","face_vomiting":"1f92e.png","face_with_cowboy_hat":"1f920.png","face_with_hand_over_mouth":"1f92d.png","face_with_head_bandage":"1f915.png","face_with_monocle":"1f9d0.png","face_with_raised_eyebrow":"1f928.png","face_with_rolling_eyes":"1f644.png","face_with_symbols_on_mouth":"1f92c.png","face_with_thermometer":"1f912.png","fearful":"1f628.png","flushed":"1f633.png","frowning":"1f626.png","ghost":"1f47b.png","gift_heart":"1f49d.png","green_heart":"1f49a.png","grimacing":"1f62c.png","grin":"1f601.png","grinning":"1f600.png","hankey":"1f4a9.png","hear_no_evil":"1f649.png","heart":"2764-fe0f.png","heart_decoration":"1f49f.png","heart_eyes":"1f60d.png","heart_eyes_cat":"1f63b.png","heartbeat":"1f493.png","heartpulse":"1f497.png","heavy_heart_exclamation_mark_ornament":"2763-fe0f.png","hole":"1f573-fe0f.png","hot_face":"1f975.png","hugging_face":"1f917.png","hushed":"1f62f.png","imp":"1f47f.png","innocent":"1f607.png","japanese_goblin":"1f47a.png","japanese_ogre":"1f479.png","joy":"1f602.png","joy_cat":"1f639.png","kiss":"1f48b.png","kissing":"1f617.png","kissing_cat":"1f63d.png","kissing_closed_eyes":"1f61a.png","kissing_heart":"1f618.png","kissing_smiling_eyes":"1f619.png","laughing":"1f606.png","left_speech_bubble":"1f5e8-fe0f.png","love_letter":"1f48c.png","lying_face":"1f925.png","mask":"1f637.png","money_mouth_face":"1f911.png","nauseated_face":"1f922.png","nerd_face":"1f913.png","neutral_face":"1f610.png","no_mouth":"1f636.png","open_mouth":"1f62e.png","orange_heart":"1f9e1.png","partying_face":"1f973.png","pensive":"1f614.png","persevere":"1f623.png","pleading_face":"1f97a.png","pouting_cat":"1f63e.png","purple_heart":"1f49c.png","rage":"1f621.png","relaxed":"263a-fe0f.png","relieved":"1f60c.png","revolving_hearts":"1f49e.png","right_anger_bubble":"1f5ef-fe0f.png","robot_face":"1f916.png","rolling_on_the_floor_laughing":"1f923.png","scream":"1f631.png","scream_cat":"1f640.png","see_no_evil":"1f648.png","shushing_face":"1f92b.png","skull":"1f480.png","skull_and_crossbones":"2620-fe0f.png","sleeping":"1f634.png","sleepy":"1f62a.png","slightly_frowning_face":"1f641.png","slightly_smiling_face":"1f642.png","smile":"1f604.png","smile_cat":"1f638.png","smiley":"1f603.png","smiley_cat":"1f63a.png","smiling_face_with_3_hearts":"1f970.png","smiling_imp":"1f608.png","smirk":"1f60f.png","smirk_cat":"1f63c.png","sneezing_face":"1f927.png","sob":"1f62d.png","space_invader":"1f47e.png","sparkling_heart":"1f496.png","speak_no_evil":"1f64a.png","speech_balloon":"1f4ac.png","star-struck":"1f929.png","stuck_out_tongue":"1f61b.png","stuck_out_tongue_closed_eyes":"1f61d.png","stuck_out_tongue_winking_eye":"1f61c.png","sunglasses":"1f60e.png","sweat":"1f613.png","sweat_drops":"1f4a6.png","sweat_smile":"1f605.png","thinking_face":"1f914.png","thought_balloon":"1f4ad.png","tired_face":"1f62b.png","triumph":"1f624.png","two_hearts":"1f495.png","unamused":"1f612.png","upside_down_face":"1f643.png","weary":"1f629.png","white_frowning_face":"2639-fe0f.png","white_heart":"1f90d.png","wink":"1f609.png","woozy_face":"1f974.png","worried":"1f61f.png","yawning_face":"1f971.png","yellow_heart":"1f49b.png","yum":"1f60b.png","zany_face":"1f92a.png","zipper_mouth_face":"1f910.png","zzz":"1f4a4.png"},"enableQQ":false,"highlight":true,"lang":"zh-cn","pageSize":10,"placeholder":"你的评论 ...","recordIP":true,"serverURLs":"https://q9muqmk7.api.lncldglobal.com","visitor":true}},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":30,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
